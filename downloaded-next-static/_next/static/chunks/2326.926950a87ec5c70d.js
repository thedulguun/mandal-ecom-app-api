"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2326],{32510:function(e,l,a){a.d(l,{Z:function(){return s}});var s=(0,a(30853).Z)("map","IconMap",[["path",{d:"M3 7l6 -3l6 3l6 -3v13l-6 3l-6 -3l-6 3v-13",key:"svg-0"}],["path",{d:"M9 4v13",key:"svg-1"}],["path",{d:"M15 7v13",key:"svg-2"}]])},74075:function(e,l,a){a.d(l,{Z:function(){return s}});var s=(0,a(30853).Z)("trash","IconTrash",[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]])},8861:function(e,l,a){a.d(l,{Z:function(){return s}});var s=(0,a(30853).Z)("user","IconUser",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]])},46708:function(e,l,a){var s=a(18992);let r="/api/v1";l.Z={delete:async(e,l,a)=>{var d,n,i,o,t;try{let n=await s.Z.delete("".concat(r,"/delete"),{params:{table:e,id:l,staff:a}});return{success:!0,data:null==n?void 0:null===(d=n.data)||void 0===d?void 0:d.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(i=e.response)||void 0===i?void 0:null===(n=i.data)||void 0===n?void 0:n.error)||(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(o=t.data)||void 0===o?void 0:o.message)}}},deleteOrder:async(e,l)=>{var a,d,n,i,o;try{let d=await s.Z.delete("".concat(r,"/deleteOrder"),{params:{id:e,staff:l}});return{success:!0,data:null==d?void 0:null===(a=d.data)||void 0===a?void 0:a.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(d=n.data)||void 0===d?void 0:d.error)||(null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(i=o.data)||void 0===i?void 0:i.message)}}},deleteItem:async(e,l)=>{var a,d,n,i,o;try{let d=await s.Z.delete("".concat(r,"/deleteItem"),{params:{id:e,staff:l}});return{success:!0,data:null==d?void 0:null===(a=d.data)||void 0===a?void 0:a.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(d=n.data)||void 0===d?void 0:d.error)||(null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(i=o.data)||void 0===i?void 0:i.message)}}},deleteDelivery:async(e,l)=>{var a,d,n,i,o;try{let d=await s.Z.delete("".concat(r,"/deleteDelivery"),{params:{id:e,staff:l}});return{success:!0,data:null==d?void 0:null===(a=d.data)||void 0===a?void 0:a.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(d=n.data)||void 0===d?void 0:d.error)||(null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(i=o.data)||void 0===i?void 0:i.message)}}},deleteBranch:async(e,l)=>{var a,d,n,i,o;try{let d=await s.Z.delete("".concat(r,"/deleteBranch"),{params:{id:e,staff:l}});return{success:!0,data:null==d?void 0:null===(a=d.data)||void 0===a?void 0:a.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(d=n.data)||void 0===d?void 0:d.error)||(null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(i=o.data)||void 0===i?void 0:i.message)}}},deleteUser:async(e,l)=>{var a,d,n,i,o;try{let d=await s.Z.delete("".concat(r,"/deleteUser"),{params:{id:e,staff:l}});return{success:!0,data:null==d?void 0:null===(a=d.data)||void 0===a?void 0:a.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(d=n.data)||void 0===d?void 0:d.error)||(null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(i=o.data)||void 0===i?void 0:i.message)}}},deleteWare:async(e,l)=>{var a,d,n,i,o;try{let d=await s.Z.delete("".concat(r,"/deleteWare"),{params:{id:e,staff:l}});return{success:!0,data:null==d?void 0:null===(a=d.data)||void 0===a?void 0:a.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(d=n.data)||void 0===d?void 0:d.error)||(null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(i=o.data)||void 0===i?void 0:i.message)}}}}},2326:function(e,l,a){a.r(l),a.d(l,{default:function(){return Order}});var s=a(85893),r=a(32197),d=a(86414),n=a(47181),i=a(102),o=a(36616),t=a(23583),c=a(95085),u=a(90303),v=a(96034),h=a(95601),m=a(92256),x=a(15779),g=a(95124),p=a(67294),j=a(79153),b=a(85158),y=a(74075),f=a(32510),_=a(8861),w=a(11163),N=a(60946),C=a(37113),A=a(53907),S=a(98298),k=a(88767),D=a(27484),Z=a.n(D),T=a(92968),F=a(26148),M=a(60894),P=a(87412),O=a(46708),Y=a(38188),z=a(12499),V=a(54073),E=a(42099),Q=a(70140),H=a(88198),changeRegionOrder=e=>{var l,a;let{opened:r,onClose:d,select:i,refetch:t,setSelect:c,data:u}=e,[v,h]=(0,p.useState)(),m=(0,k.useMutation)(["change-region"],()=>S.Z.changeRegionOrder(i,v),{onSuccess(e){(null==e?void 0:e.success)===!0?(t(),d(),c([]),(0,N.PV)({message:"Бүс солигдлоо",status:!0})):(0,N.PV)({message:null==e?void 0:e.e,status:!1})}}),handleSumit=()=>{m.mutateAsync()};return(0,s.jsxs)(E.u,{opened:r,onClose:d,title:"Бүс солих",className:"space-y-10",children:[(0,s.jsx)(o.P,{label:"Бүсүүд",searchable:!0,clearable:!0,placeholder:"Бүс сонгоно уу",data:null===(a=u||[])||void 0===a?void 0:null===(l=a.data)||void 0===l?void 0:l.map(e=>{var l;return{value:null==e?void 0:null===(l=e.name)||void 0===l?void 0:l.toString(),label:(null==e?void 0:e.name)||""}}),onChange:e=>h(e)}),(0,s.jsx)(Q.Z,{justify:"end",children:(0,s.jsx)(n.z,{leftSection:(0,s.jsx)(H.Z,{}),color:"#6A5ADF",radius:"md",className:"mt-4",type:"submit",disabled:null==m?void 0:m.isLoading,loading:null==m?void 0:m.isLoading,onClick:()=>handleSumit(),children:"Хадгалах"})})]})},I=a(43681),R=a(72372),Order=()=>{var e,l,a,D,E;let[Q,H]=(0,p.useState)([]),[L,{open:q,close:U}]=(0,C.q)(!1),[W,B]=(0,p.useState)(!1),[X,G]=(0,p.useState)(!1),[J,K]=(0,p.useState)(""),{user:$}=(0,I.a)(),ee=(0,w.useRouter)(),[el,ea]=(0,p.useState)(100),[es,er]=(0,p.useState)(0),[ed,en]=(0,p.useState)(0),[ei,eo]=(0,p.useState)(""),[et,ec]=(0,p.useState)("asc"),[eu,ev]=(0,p.useState)(""),[eh]=(0,A.c)(eu,200),[em,ex]=(0,p.useState)(null),[eg,ep]=(0,p.useState)(null),[ej,eb]=(0,p.useState)(!1),{data:ey,refetch:ef,isLoading:e_}=(0,k.useQuery)(["order-list",el,es,ei,et,eh,J,em,eg,$],()=>(null==$?void 0:$.role)==="admin"||(null==$?void 0:$.role)==="manager"||(null==$?void 0:$.role)==="nyagtlan"||(null==$?void 0:$.role)=="operator"?S.Z.find(ed,el,ei,et,eh,J,em,eg,1):Promise.reject()),{data:ew,isLoading:eN,refetch:eC}=(0,k.useQuery)(["customer-by-id",el,es,ei,et,eh,J,em,eg,$],()=>(null==$?void 0:$.role)==="customer"?S.Z.getOrderCustomer(ed,el,ei,et,eh,J,em,eg,5,null==$?void 0:$.user_id):Promise.reject()),{data:eA}=(0,k.useQuery)(["region-list"],()=>M.Z.find(),{enabled:(null==$?void 0:$.role)!="customer"}),{data:eS}=(0,k.useQuery)(["selected-data",Q],()=>(null==Q?void 0:Q.length)>0?R.Z.findOrder(Q,"orders"):Promise.reject()),{data:ek}=(0,k.useQuery)(["driver-list"],()=>F.Z.getDriver(),{enabled:(null==$?void 0:$.role)!="customer"}),{data:eD}=(0,k.useQuery)(["user-list"],()=>F.Z.find(),{enabled:(null==$?void 0:$.role)!="customer"}),handleCheckboxChange=e=>{H(l=>{if("selectAll"===e){var a;return l.length<((null==ey?void 0:ey.data.length)||(null==ew?void 0:null===(a=ew.data)||void 0===a?void 0:a.length))?((null==ey?void 0:ey.data)||(null==ew?void 0:ew.data)).map(e=>e.id):[]}return l.includes(e)?l.filter(l=>l!==e):[...l,e]})},eZ=(0,k.useMutation)(["delete-order"],e=>e?O.Z.deleteOrder(e,null==$?void 0:$.last_name):O.Z.deleteOrder(Q,null==$?void 0:$.last_name),{onSuccess(e){(null==e?void 0:e.success)===!0?(ef(),eC(),H([]),(0,N.PV)({message:"Захиалга устгагдлаа",status:!0})):(0,N.PV)({message:null==e?void 0:e.e,status:!1})}}),handleDelete=e=>{Y.qk.openConfirmModal({title:"Захиалга",centered:!0,children:(0,s.jsx)(r.x,{size:"sm",children:"Та энэ захиалга устгахдаа итгэлтэй байна уу?"}),confirmProps:{color:"#6A5ADF"},labels:{confirm:"Тийм",cancel:"Үгүй"},onConfirm:async()=>{await (null==eZ?void 0:eZ.mutateAsync(e))}})};return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"bg-white rounded-xl p-3",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(N.bo,{text:"Захиалгын жагсаалт"}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)(d.o,{className:"w-96",placeholder:"Хайх ...",value:eu,onChange:e=>{ev(e.target.value)},rightSection:(0,s.jsx)(j.Z,{color:"#6A5ADF",className:"cursor-pointer"})}),(0,s.jsx)(z.Z,{data:(null==Q?void 0:Q.length)>0?Q:(null==ey?void 0:ey.data)||(null==ew?void 0:ew.data),select:(null==Q?void 0:Q.length)>0,table:"orders"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(n.z,{color:"#6A5ADF",radius:9,leftSection:(0,s.jsx)("img",{src:"/icons/excel.svg",alt:"excel"}),onClick:()=>eb(e=>!e),children:"Excel"}),(0,s.jsx)(i.U,{in:ej,className:"absolute right-0 rounded-lg border border-indigo-300 space-y-2 p-3 w-44 h-auto bg-white z-40 font-bold text-sm text-indigo-600",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-2 pb-2 border-b cursor-pointer",onClick:()=>(0,N.pq)("order-excel",((null==Q?void 0:Q.length)>0?null==eS?void 0:eS.data:(null==ey?void 0:ey.data)||(null==ew?void 0:ew.data)).map(e=>({Дэлгүүрийн_нэр:e.shop_name,Салбар:e.name,Утас:e.branch_phone||"",Хаяг:"".concat(e.city," ").concat(e.district," ").concat(e.committee," ").concat(e.street," ").concat(e.toot," ").concat(e.branch_address," ").concat(e.branch_addition),Үүсгэсэн_огноо:Z()(e.created_at).format("YYYY-MM-DD HH:mm"),Төлөв:1==e.status?"Бүртгэгдсэн":2==e.status?"Жолоочид хуваарилсан":3==e.status?"Жолооч хүлээн авсан":4==e.status?"Дууссан":null,Тоо:e.quantity||"",Жолооч_хүлээн_авсан:(null==e?void 0:e.received_driver)&&Z()(e.received_driver||"").format("YYYY-MM-DD HH:mm")||"",Жолооч:e.driver_name||""}))),children:[(0,s.jsx)("img",{src:"/icons/excel-color.svg",alt:"icon"}),(0,s.jsx)("p",{children:"Export to Excel"})]})})]}),(null==$?void 0:$.role)!=="nyagtlan"&&(0,s.jsx)(n.z,{color:"#6A5ADF",radius:9,leftSection:(0,s.jsx)("img",{src:"/icons/plus.svg",alt:"plus"}),onClick:()=>ee.push("/order/create"),children:"Шинэ захиалга бүртгэх"})]})]}),(0,s.jsx)("div",{className:"border-b border-[#6A5ADF] w-full mt-2 mb-1"}),(0,s.jsxs)("div",{className:"relative flex items-center mr-12 gap-4",children:[(0,s.jsx)("div",{className:"text-sm",children:(0,s.jsx)(V.W,{label:"Эхлэх огноо",placeholder:"yyyy-mm-dd",valueFormat:"YYYY-MM-DD",value:em,onChange:ex,clearable:!0})}),(0,s.jsx)("div",{className:"text-sm",children:(0,s.jsx)(V.W,{label:"Дуусах огноо",placeholder:"yyyy-mm-dd",valueFormat:"YYYY-MM-DD",value:eg,onChange:ep,clearable:!0})}),(0,s.jsx)(o.P,{label:"Төлөв",data:[{label:"Бүгд",value:""},{label:"Бүртгэгдсэн",value:"1"},{label:"Жолоочид хуваарилсан",value:"2"}].map(e=>({value:null==e?void 0:e.value.toString(),label:(null==e?void 0:e.label)||""})),onChange:e=>{eo("orders.status"),K(e),ec("")},clearable:!0,placeholder:"Бүгд"}),(null==$?void 0:$.role)!=="customer"&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.P,{label:"Бүс",data:((null==eA?void 0:eA.data)||[]).map(e=>({value:null==e?void 0:e.name.toString(),label:(null==e?void 0:e.name)||""})),onChange:e=>{eo("branch.region"),K(e),ec("")},clearable:!0,placeholder:"Бүгд"}),(0,s.jsx)(o.P,{label:"Жолооч",searchable:!0,clearable:!0,data:((null==ek?void 0:ek.data)||[]).filter(e=>(null==e?void 0:e.role)!=="driver2").map(e=>({value:null==e?void 0:e.driver_name.toString(),label:(null==e?void 0:e.driver_name)||""})),onChange:e=>{eo("orders.driver_name"),K(e),ec("")},placeholder:"Бүгд"}),(0,s.jsx)(o.P,{label:"Харилцагч",data:((null==eD?void 0:eD.data)||[]).filter(e=>(null==e?void 0:e.role)==="customer").map(e=>({value:null==e?void 0:e.shop_name.toString(),label:(null==e?void 0:e.shop_name)||""})),onChange:e=>{eo("users.shop_name"),K(e),ec("")},searchable:!0,clearable:!0,placeholder:"Бүгд"})]}),(0,s.jsx)(t.u,{label:"Шүүлтүүр цэвэрлэх",children:(0,s.jsx)("div",{className:"mt-6 cursor-pointer p-1 rounded-sm border",onClick:()=>{eo(""),ec(""),K(""),eo(""),ex(null),ep(null),ee.reload()},children:(0,s.jsx)("img",{src:"/icons/filter-clear.svg",alt:"filterClear"})})})]}),(0,s.jsx)("div",{className:"border-1 border-b border-[#6A5ADF] mt-2"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(c.f,{visible:(null==$?void 0:$.role)==="customer"?eN:e_}),(0,s.jsx)(u.x,{className:"h-[70vh]",color:"#6A5ADF",children:(0,s.jsxs)(v.i,{children:[(0,s.jsx)(v.i.Thead,{className:"sticky top-0 bg-white z-40",children:(0,s.jsxs)(v.i.Tr,{children:[(0,s.jsx)(v.i.Th,{className:"sticky left-0 bg-white",children:(0,s.jsx)(h.X,{checked:Q.length===((null==ey?void 0:null===(e=ey.data)||void 0===e?void 0:e.length)||(null==ew?void 0:null===(l=ew.data)||void 0===l?void 0:l.length)),onChange:()=>handleCheckboxChange("selectAll"),color:"#6A5ADF"})}),(0,s.jsx)(v.i.Th,{children:"#"}),(0,s.jsx)(v.i.Th,{miw:150,children:(0,s.jsxs)("div",{className:"flex justify-between",children:["Огноо",(0,s.jsx)("img",{src:"/icons/sort.svg",alt:"sort",onClick:()=>{eo("orders.created_at"),"desc"===et?ec("asc"):ec("desc")},className:"cursor-pointer hover:bg-gray-100 hover:rounded-md"})]})}),(0,s.jsx)(v.i.Th,{miw:140,children:(0,s.jsxs)("div",{className:"flex justify-between",children:["Харилцагч",(0,s.jsx)("img",{src:"/icons/sort.svg",alt:"sort",onClick:()=>{eo("users.shop_name"),"desc"===et?ec("asc"):ec("desc")},className:"cursor-pointer hover:bg-gray-100 hover:rounded-md"})]})}),(0,s.jsx)(v.i.Th,{miw:130,children:(0,s.jsxs)("div",{className:"flex justify-between",children:["Салбар",(0,s.jsx)("img",{src:"/icons/sort.svg",alt:"sort",onClick:()=>{eo("branch.name"),"desc"===et?ec("asc"):ec("desc")},className:"cursor-pointer hover:bg-gray-100 hover:rounded-md"})]})}),(0,s.jsx)(v.i.Th,{miw:300,children:"Хаяг"}),(0,s.jsx)(v.i.Th,{miw:110,children:(0,s.jsxs)("div",{className:"flex justify-between",children:["Жолооч",(0,s.jsx)("img",{src:"/icons/sort.svg",alt:"sort",onClick:()=>{eo("orders.driver_name"),"desc"===et?ec("asc"):ec("desc")},className:"cursor-pointer hover:bg-gray-100 hover:rounded-md"})]})}),(0,s.jsx)(v.i.Th,{miw:100,children:(0,s.jsxs)("div",{className:"flex justify-between",children:["Утас",(0,s.jsx)("img",{src:"/icons/sort.svg",alt:"sort",onClick:()=>{eo("branch.branch_phone"),"desc"===et?ec("asc"):ec("desc")},className:"cursor-pointer hover:bg-gray-100 hover:rounded-md"})]})}),(0,s.jsx)(v.i.Th,{miw:200,children:"Нэмэлт тайлбар"}),(0,s.jsx)(v.i.Th,{miw:200,children:"Жолоочийн тайлбар"}),(0,s.jsx)(v.i.Th,{miw:90,children:"Төлөв"}),(0,s.jsx)(v.i.Th,{miw:100,children:"Бүс"}),(0,s.jsx)(v.i.Th,{className:"sticky right-0 bg-white",children:"Үйлдэл"})]})}),(0,s.jsx)(v.i.Tbody,{children:(null==ey?void 0:null===(a=ey.data)||void 0===a?void 0:a.length)>0||(null==ew?void 0:null===(D=ew.data)||void 0===D?void 0:D.length)>0?null===(E=(null==ey?void 0:ey.data)||(null==ew?void 0:ew.data))||void 0===E?void 0:E.map((e,l)=>(0,s.jsxs)(v.i.Tr,{children:[(0,s.jsx)(v.i.Td,{className:"sticky left-0 bg-white",children:(0,s.jsx)(h.X,{color:"#6A5ADF",checked:Q.includes(null==e?void 0:e.id),onChange:()=>handleCheckboxChange(null==e?void 0:e.id)})}),(0,s.jsx)(v.i.Td,{children:l+1}),(0,s.jsx)(v.i.Td,{children:Z()(null==e?void 0:e.created_at).format("YYYY/MM/DD HH:mm")}),(0,s.jsx)(v.i.Td,{maw:200,children:null==e?void 0:e.shop_name}),(0,s.jsx)(v.i.Td,{maw:200,children:null==e?void 0:e.name}),(0,s.jsx)(v.i.Td,{maw:200,mah:20,children:"".concat((null==e?void 0:e.city)||""," ").concat((null==e?void 0:e.district)||""," ").concat((null==e?void 0:e.committee)||""," ").concat((null==e?void 0:e.street)||""," ").concat((null==e?void 0:e.toot)||""," ").concat((null==e?void 0:e.branch_address)||""," ").concat((null==e?void 0:e.branch_addition)||"")}),(0,s.jsx)(v.i.Td,{maw:200,children:null==e?void 0:e.driver_name}),(0,s.jsx)(v.i.Td,{maw:200,children:null==e?void 0:e.branch_phone}),(0,s.jsx)(v.i.Td,{maw:200,mah:20,children:null==e?void 0:e.order_desc}),(0,s.jsx)(v.i.Td,{maw:200,mah:20,children:null==e?void 0:e.driver_desc}),(0,s.jsx)(v.i.Td,{children:(null==e?void 0:e.status)==1?(0,s.jsx)(m.C,{color:"#6A5ADF",children:"Бүртгэгдсэн"}):(0,s.jsx)(m.C,{color:"yellow",children:"Жолоочид хуваарилсан"})}),(0,s.jsx)(v.i.Td,{children:null==e?void 0:e.region}),(0,s.jsxs)(v.i.Td,{className:"flex justify-center h-auto items-center space-x-2 sticky right-0 bg-white",children:[(0,s.jsx)(x.A,{color:"yellow",onClick:()=>ee.push("/order/".concat(null==e?void 0:e.id)),children:(0,s.jsx)(t.u,{label:"Дэлгэрэнгүй харах",children:(0,s.jsx)(b.Z,{})})}),(null==$?void 0:$.role)!=="nyagtlan"&&(0,s.jsx)(x.A,{color:"red",onClick:()=>handleDelete(null==e?void 0:e.id),children:(0,s.jsx)(t.u,{label:"Устгах",children:(0,s.jsx)(y.Z,{})})})]})]},"orderData-".concat(l))):(0,s.jsx)(v.i.Tr,{children:(0,s.jsx)(v.i.Td,{colSpan:12,className:"text-center",children:"Мэдээлэл олдсонгүй"})})})]})}),(0,s.jsx)("div",{className:"border-b border-[#6A5ADF] w-full my-1"}),(0,s.jsxs)("div",{className:"flex justify-between items-center my-1",children:[(0,s.jsxs)("p",{className:"text-sm text-[#6A5ADF]",children:["Нийт ",null==Q?void 0:Q.length," мөр сонгосон байна"]}),(0,s.jsxs)("p",{className:"flex items-center text-sm text-[#6A5ADF]",children:["Нэг хуудсанд харуулах мөрийн тоо",(0,s.jsxs)("select",{className:"w-12 rounded-md ml-2 pl-0.5 h-6 border border-[#6A5ADF]",onChange:e=>{ea(e.target.value),er(0),en(0)},children:[(0,s.jsx)("option",{value:"100",children:"100"}),(0,s.jsx)("option",{value:"250",children:"250"}),(0,s.jsx)("option",{value:"500",children:"500"}),(0,s.jsx)("option",{value:"1000",children:"1000"})]})]})]}),(0,s.jsxs)("div",{className:"flex mt-4 items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex space-x-3",children:[((null==$?void 0:$.role)=="admin"||(null==$?void 0:$.role)=="manager"||(null==$?void 0:$.role)=="operator")&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.z,{leftSection:(0,s.jsx)("img",{src:"/icons/list.svg",alt:"list"}),color:"#6A5ADF",radius:9,onClick:()=>B(!0),disabled:Q.length<=0,children:"Төлөв солих"}),(0,s.jsx)(n.z,{leftSection:(0,s.jsx)(f.Z,{size:"1.4rem"}),color:"#6A5ADF",radius:9,onClick:()=>G(!0),disabled:Q.length<=0,children:"Бүс солих"}),(0,s.jsx)(n.z,{leftSection:(0,s.jsx)(_.Z,{size:"1.4rem"}),color:"#6A5ADF",radius:9,onClick:()=>q(),disabled:Q.length<=0,children:"Жолооч солих"})]}),((null==$?void 0:$.role)=="admin"||(null==$?void 0:$.role)=="customer"||(null==$?void 0:$.role)=="operator")&&(0,s.jsx)(n.z,{leftSection:(0,s.jsx)(y.Z,{size:"1.4rem"}),color:"#6A5ADF",radius:9,onClick:()=>handleDelete(),disabled:Q.length<=0,children:"Устгах"})]}),(0,s.jsx)(g.t,{value:es+1,siblings:2,total:Math.floor(((null==ey?void 0:ey.pagination)||(null==ew?void 0:ew.pagination))/el)+(((null==ey?void 0:ey.pagination)||(null==ew?void 0:ew.pagination))%el==0?0:1),onChange:e=>{er(e-1),en(e*el-el)},color:"#6A5ADF"})]})]}),(0,s.jsx)(changeRegionOrder,{opened:X,onClose:()=>G(!1),select:Q,setSelect:H,refetch:ef,data:eA}),(0,s.jsx)(T.Z,{opened:L,onClose:U,select:Q,setSelect:H,refetch:ef,table:"orders",status:"2"}),(0,s.jsx)(P.Z,{table:"orders",opened:W,onClose:()=>B(!1),select:Q,setSelect:H,refetch:ef,data:[{label:"Бүртгэгдсэн",value:"1"},{label:"Жолооч хүлээн авсан",value:"3"}]})]})})}},92968:function(e,l,a){var s=a(85893),r=a(98298),d=a(26148),n=a(43681),i=a(60946),o=a(42099),t=a(95085),c=a(36616),u=a(70140),v=a(47181),h=a(88198),m=a(67294),x=a(88767);l.Z=e=>{let{opened:l,onClose:a,select:g,refetch:p,setSelect:j,table:b,status:y}=e,[f,_]=(0,m.useState)(),{user:w}=(0,n.a)(),{data:N,isLoading:C}=(0,x.useQuery)(["driver-list"],()=>d.Z.getDriver(),{enabled:(null==w?void 0:w.role)!="customer"}),A=(0,x.useMutation)(["create-order"],()=>r.Z.changeDriver(g,f,b,y,null==w?void 0:w.last_name),{onSuccess(e){(null==e?void 0:e.success)===!0?(a(),p(),j([]),(0,i.PV)({message:"Жолоочид хувиарлагдлаа",status:!0})):(0,i.PV)({message:null==e?void 0:e.e,status:!1})}}),handleSumit=()=>{A.mutateAsync()};return(0,s.jsxs)(o.u,{opened:l,onClose:a,title:"Жолооч өөрчлөх",className:"space-y-10",children:[(0,s.jsx)(t.f,{visible:C}),(0,s.jsx)(c.P,{label:"Жолоочид",searchable:!0,clearable:!0,data:((null==N?void 0:N.data)||[]).filter(e=>"orders"===b?(null==e?void 0:e.role)==="driver1"||(null==e?void 0:e.role)==="driver":(null==e?void 0:e.role)==="driver2"||(null==e?void 0:e.role)==="driver").map(e=>{var l;return{value:null==e?void 0:null===(l=e.driver_name)||void 0===l?void 0:l.toString(),label:(null==e?void 0:e.driver_name)||""}}),onChange:e=>_(e)}),(0,s.jsx)(u.Z,{justify:"end",children:(0,s.jsx)(v.z,{leftSection:(0,s.jsx)(h.Z,{}),color:"#6A5ADF",radius:"md",className:"mt-4",type:"submit",loading:null==A?void 0:A.isLoading,disabled:null==A?void 0:A.isLoading,onClick:()=>handleSumit(),children:"Хадгалах"})})]})}},32197:function(e,l,a){a.d(l,{x:function(){return f}});var s=a(67294),r={root:"m-b6d8b162"},d=a(69429),n=a(85565),i=a(43362),o=a(90987),t=a(39581),c=a(83050),u=a(13637),v=a(2979),h=Object.defineProperty,m=Object.defineProperties,x=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,l,a)=>l in e?h(e,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[l]=a,__spreadValues=(e,l)=>{for(var a in l||(l={}))p.call(l,a)&&__defNormalProp(e,a,l[a]);if(g)for(var a of g(l))j.call(l,a)&&__defNormalProp(e,a,l[a]);return e},__spreadProps=(e,l)=>m(e,x(l)),__objRest=(e,l)=>{var a={};for(var s in e)p.call(e,s)&&0>l.indexOf(s)&&(a[s]=e[s]);if(null!=e&&g)for(var s of g(e))0>l.indexOf(s)&&j.call(e,s)&&(a[s]=e[s]);return a};let b={inherit:!1},y=(0,u.Z)((e,{variant:l,lineClamp:a,gradient:s,size:r,color:i})=>({root:{"--text-fz":(0,d.yv)(r),"--text-lh":(0,d.Dp)(r),"--text-gradient":"gradient"===l?(0,n.u)(s,e):void 0,"--text-line-clamp":"number"==typeof a?a.toString():void 0,"--text-color":i?(0,v.p)(i,e):void 0}})),f=(0,i.b)((e,l)=>{let a=(0,o.w)("Text",b,e),{lineClamp:d,truncate:n,inline:i,inherit:u,gradient:v,span:h,__staticSelector:m,vars:x,className:g,style:p,classNames:j,styles:f,unstyled:_,variant:w,mod:N,size:C}=a,A=__objRest(a,["lineClamp","truncate","inline","inherit","gradient","span","__staticSelector","vars","className","style","classNames","styles","unstyled","variant","mod","size"]),S=(0,t.y)({name:["Text",m],props:a,classes:r,className:g,style:p,classNames:j,styles:f,unstyled:_,vars:x,varsResolver:y});return s.createElement(c.x,__spreadValues(__spreadProps(__spreadValues({},S("root",{focusable:!0})),{ref:l,component:h?"span":"p",variant:w,mod:[{"data-truncate":"start"===n?"start":"end"===n||n?"end":void 0,"data-line-clamp":"number"==typeof d,"data-inline":i,"data-inherit":u},N],size:C}),A))});f.classes=r,f.displayName="@mantine/core/Text"}}]);