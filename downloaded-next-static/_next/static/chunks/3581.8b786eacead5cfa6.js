"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3581],{67751:function(e,a,t){t.d(a,{Z:function(){return l}});var l=(0,t(30853).Z)("box","IconBox",[["path",{d:"M12 3l8 4.5l0 9l-8 4.5l-8 -4.5l0 -9l8 -4.5",key:"svg-0"}],["path",{d:"M12 12l8 -4.5",key:"svg-1"}],["path",{d:"M12 12l0 9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}]])},9494:function(e,a,t){t.d(a,{Z:function(){return l}});var l=(0,t(30853).Z)("currency-tugrik","IconCurrencyTugrik",[["path",{d:"M7 6h10",key:"svg-0"}],["path",{d:"M12 6v13",key:"svg-1"}],["path",{d:"M8 17l8 -3",key:"svg-2"}],["path",{d:"M16 10l-8 3",key:"svg-3"}]])},8861:function(e,a,t){t.d(a,{Z:function(){return l}});var l=(0,t(30853).Z)("user","IconUser",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]])},11336:function(e,a,t){var l=t(18992),d=t(27484),o=t.n(d);let n="/api/v1";a.Z={find:async(e,a,t,d,i,s,r,u)=>{try{var c,v;let m=await l.Z.get("".concat(n,"/items"),{params:{startLimit:e,endLimit:a,order:t,sort:d,search:i,value:s,startDate:r?o()(r).format("YYYY-MM-DD 00:00:00"):null,endDate:u?o()(u).format("YYYY-MM-DD 23:59:59"):null}});return{success:!0,data:null==m?void 0:null===(c=m.data)||void 0===c?void 0:c.data,pagination:null==m?void 0:null===(v=m.data)||void 0===v?void 0:v.pagination}}catch(e){return{success:!1,e}}},returnedItem:async(e,a,t,d,i,s,r,u)=>{try{var c,v;let m=await l.Z.get("".concat(n,"/getReturnedItem"),{params:{startLimit:e,endLimit:a,order:t,sort:d,value:s,search:i,startDate:r?o()(r).format("YYYY-MM-DD 00:00:00"):null,endDate:u?o()(u).format("YYYY-MM-DD 23:59:59"):null}});return{success:!0,data:null==m?void 0:null===(c=m.data)||void 0===c?void 0:c.data,pagination:null==m?void 0:null===(v=m.data)||void 0===v?void 0:v.pagination}}catch(e){return{success:!1,e}}},getPrepareItem:async(e,a,t,d,o)=>{var i,s,r,u,c,v;try{let r=await l.Z.get("".concat(n,"/prepareItem"),{params:{startLimit:e,endLimit:a,search:t,order:d,sort:o}});return{success:!0,data:null==r?void 0:null===(i=r.data)||void 0===i?void 0:i.data,pagination:null==r?void 0:null===(s=r.data)||void 0===s?void 0:s.pagination}}catch(e){return{success:!1,e:(null==e?void 0:null===(u=e.response)||void 0===u?void 0:null===(r=u.data)||void 0===r?void 0:r.error)||(null==e?void 0:null===(v=e.response)||void 0===v?void 0:null===(c=v.data)||void 0===c?void 0:c.message)}}},getReadyItem:async(e,a,t,d,o)=>{var i,s,r,u,c,v;try{let r=await l.Z.get("".concat(n,"/readyItem"),{params:{startLimit:e,endLimit:a,search:t,order:d,sort:o}});return{success:!0,data:null==r?void 0:null===(i=r.data)||void 0===i?void 0:i.data,pagination:null==r?void 0:null===(s=r.data)||void 0===s?void 0:s.pagination}}catch(e){return{success:!1,e:(null==e?void 0:null===(u=e.response)||void 0===u?void 0:null===(r=u.data)||void 0===r?void 0:r.error)||(null==e?void 0:null===(v=e.response)||void 0===v?void 0:null===(c=v.data)||void 0===c?void 0:c.message)}}},create:async(e,a)=>{var t,d,o,i,s;try{let d=await l.Z.post("".concat(n,"/createItem"),{...e,staff:a});return{success:!0,data:null==d?void 0:null===(t=d.data)||void 0===t?void 0:t.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(d=o.data)||void 0===d?void 0:d.error)||(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(i=s.data)||void 0===i?void 0:i.message)}}},editQuantity:async(e,a)=>{var t,d,o,i,s;try{let d=await l.Z.patch("".concat(n,"/editItemQuantity"),{id:e,quantity:a});return{success:!0,data:null==d?void 0:null===(t=d.data)||void 0===t?void 0:t.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(d=o.data)||void 0===d?void 0:d.error)||(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(i=s.data)||void 0===i?void 0:i.message)}}},editStart:async(e,a)=>{var t,d,o,i,s;try{let d=await l.Z.patch("".concat(n,"/editStart"),{id:e,start:a});return{success:!0,data:null==d?void 0:null===(t=d.data)||void 0===t?void 0:t.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(d=o.data)||void 0===d?void 0:d.error)||(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(i=s.data)||void 0===i?void 0:i.message)}}},editEnd:async(e,a)=>{var t,d,o,i,s;try{let d=await l.Z.patch("".concat(n,"/editEnd"),{id:e,end:a});return{success:!0,data:null==d?void 0:null===(t=d.data)||void 0===t?void 0:t.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(d=o.data)||void 0===d?void 0:d.error)||(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(i=s.data)||void 0===i?void 0:i.message)}}},getItemByWareId:async e=>{var a,t,d,o,i;try{if(e){let t=await l.Z.get("".concat(n,"/itemsByWareId"),{params:{ware_id:e}});return{success:!0,data:null==t?void 0:null===(a=t.data)||void 0===a?void 0:a.data}}}catch(e){return{success:!1,e:(null==e?void 0:null===(d=e.response)||void 0===d?void 0:null===(t=d.data)||void 0===t?void 0:t.error)||(null==e?void 0:null===(i=e.response)||void 0===i?void 0:null===(o=i.data)||void 0===o?void 0:o.message)}}},itemById:async e=>{var a,t,d,o,i;try{let t=await l.Z.get("".concat(n,"/itemsById"),{params:{id:e}});return{success:!0,data:null==t?void 0:null===(a=t.data)||void 0===a?void 0:a.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(d=e.response)||void 0===d?void 0:null===(t=d.data)||void 0===t?void 0:t.error)||(null==e?void 0:null===(i=e.response)||void 0===i?void 0:null===(o=i.data)||void 0===o?void 0:o.message)}}},addItem:async(e,a)=>{var t,d,o,i,s;try{let d=await l.Z.patch("".concat(n,"/addItem"),{...e,worker:a});return{success:!0,data:null==d?void 0:null===(t=d.data)||void 0===t?void 0:t.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(d=o.data)||void 0===d?void 0:d.error)||(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(i=s.data)||void 0===i?void 0:i.message)}}},bundleItem:async e=>{var a,t,d,o,i;try{let t=await l.Z.patch("".concat(n,"/bundleItem"),{id:e});return{success:!0,data:null==t?void 0:null===(a=t.data)||void 0===a?void 0:a.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(d=e.response)||void 0===d?void 0:null===(t=d.data)||void 0===t?void 0:t.error)||(null==e?void 0:null===(i=e.response)||void 0===i?void 0:null===(o=i.data)||void 0===o?void 0:o.message)}}},customer:async(e,a,t,d,i,s,r,u,c)=>{try{var v,m;let p=await l.Z.get("".concat(n,"/getItemCustomer"),{params:{startLimit:e,endLimit:a,order:t,sort:d,search:i,value:s,id:r,startDate:u?o()(u).format("YYYY-MM-DD 00:00:00"):null,endDate:c?o()(c).format("YYYY-MM-DD 23:59:59"):null}});return{success:!0,data:null==p?void 0:null===(v=p.data)||void 0===v?void 0:v.data,pagination:null==p?void 0:null===(m=p.data)||void 0===m?void 0:m.pagination}}catch(e){return{success:!1,e}}}}},48011:function(e,a,t){var l=t(18992);let d="/api/v1";a.Z={find:async(e,a,t)=>{try{var o;let n=await l.Z.get("".concat(d,"/wares"),{params:{order:e,sort:a,search:t}});return{success:!0,data:null==n?void 0:null===(o=n.data)||void 0===o?void 0:o.data}}catch(e){return{success:!1,e}}},create:async(e,a,t)=>{var o,n,i,s,r;try{let n=await l.Z.post("".concat(d,"/createWare"),{user_id:e,name:a,staff:t});return{success:!0,data:null==n?void 0:null===(o=n.data)||void 0===o?void 0:o.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(i=e.response)||void 0===i?void 0:null===(n=i.data)||void 0===n?void 0:n.error)||(null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.message)}}},getWareByUserId:async e=>{var a,t,o,n,i;try{if(e){let t=await l.Z.get("".concat(d,"/wareByUserId"),{params:{user_id:e}});return{success:!0,data:null==t?void 0:null===(a=t.data)||void 0===a?void 0:a.data}}}catch(e){return{success:!1,e:(null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(t=o.data)||void 0===t?void 0:t.error)||(null==e?void 0:null===(i=e.response)||void 0===i?void 0:null===(n=i.data)||void 0===n?void 0:n.message)}}},edit:async(e,a,t)=>{var o,n,i,s,r;try{let n=await l.Z.patch("".concat(d,"/editWare"),{id:e,name:a,staff:t});return{success:!0,data:null==n?void 0:null===(o=n.data)||void 0===o?void 0:o.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(i=e.response)||void 0===i?void 0:null===(n=i.data)||void 0===n?void 0:n.error)||(null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.message)}}},customer:async(e,a,t,o)=>{try{var n;let i=await l.Z.get("".concat(d,"/getWareCustomer"),{params:{order:e,sort:a,search:t,id:o}});return{success:!0,data:null==i?void 0:null===(n=i.data)||void 0===n?void 0:n.data}}catch(e){return{success:!1,e}}}}},28920:function(e,a,t){t.r(a),t.d(a,{default:function(){return create}});var l=t(85893),d=t(67294),o=t(10330),n=t(83050),i=t(36616),s=t(86414),r=t(90589),u=t(70140),c=t(88565),v=t(32197),m=t(47181),p=t(8861),h=t(75928),y=t(67751),g=t(9494),f=(0,t(30853).Z)("upload","IconUpload",[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 9l5 -5l5 5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]]),x=t(97283),b=t(88198),j=t(56647),w=t(62352),Z=t(26148),_=t(88767),M=t(43681),D=t(48011),I=t(11336),Y=t(60946),k=t(11163),create=()=>{let e=(0,k.useRouter)(),{user:a}=(0,M.a)(),[t,S]=(0,d.useState)(),[N,P]=(0,d.useState)();(0,d.useEffect)(()=>{P(null),(null==a?void 0:a.role)==="customer"&&S(null==a?void 0:a.user_id)},[t]),(0,d.useEffect)(()=>{(null==a?void 0:a.role)==="customer"&&(S(null==a?void 0:a.user_id),A.setFieldValue("user_id",null==a?void 0:a.user_id))},[a]);let A=(0,o.c)({initialValues:{user_id:"",ware_id:"",name:"",price:null,img:""},validate:{name:e=>e.length<=0?"Барааны нэр оруулна уу":null,price:e=>null==e?"Үнэ оруулна уу":null}}),{data:F}=(0,_.useQuery)(["user-list"],()=>Z.Z.find(),{enabled:(null==a?void 0:a.role)!="customer"}),{data:O}=(0,_.useQuery)(["ware-list-order",t],()=>t?D.Z.getWareByUserId(t):Promise.reject()),z=(0,_.useMutation)(["create-item"],e=>I.Z.create(e,null==a?void 0:a.last_name),{onSuccess(a){(null==a?void 0:a.success)===!0?(e.push("/item"),(0,Y.PV)({message:"Бараа нэмэгдлээ",status:!0})):(0,Y.PV)({message:null==a?void 0:a.e,status:!1})}}),handleSubmit=e=>{null==z||z.mutateAsync(e)};return(0,l.jsxs)("div",{className:"flex w-full h-screen",children:[(0,l.jsxs)("div",{className:"w-3/5 bg-white rounded-xl p-5 mb-6",children:[(0,l.jsx)("h1",{className:"flex justify-center text-[#6A5ADF] mb-4 font-bold text-[20px]",children:"Бараа үүсгэх"}),(0,l.jsx)(n.x,{className:"mx-2",children:(0,l.jsxs)("form",{onSubmit:A.onSubmit(e=>handleSubmit(e)),children:[(0,l.jsxs)("div",{className:"flex space-x-4",children:[(null==a?void 0:a.role)!=="customer"&&(0,l.jsx)(i.P,{label:"Харилцагч",leftSection:(0,l.jsx)(p.Z,{size:"1.5rem",color:"#6A5ADF"}),placeholder:"Харилцагч сонгох",data:((null==F?void 0:F.data)||[]).filter(e=>(null==e?void 0:e.role)==="customer"&&(null==e?void 0:e.active)==1).map(e=>({label:(null==e?void 0:e.shop_name)||"",value:null==e?void 0:e.user_id.toString()})),searchable:!0,clearable:!0,onChange:e=>{S(e),A.setFieldValue("user_id",e)},disabled:(null==a?void 0:a.role)==="customer",className:"w-full",mb:20}),(0,l.jsx)(i.P,{label:"Агуулах",leftSection:(0,l.jsx)(h.Z,{size:"1.5rem",color:"#6A5ADF"}),placeholder:"Агуулах сонгох",data:((null==O?void 0:O.data)||[]).map(e=>({value:null==e?void 0:e.id.toString(),label:(null==e?void 0:e.name)||""})),onChange:e=>{P(e),A.setFieldValue("ware_id",e)},clearable:!0,value:N,nothingFoundMessage:"Агуулах олдсонгүй",className:"w-full",mb:20})]}),(0,l.jsx)(s.o,{label:"Барааны нэр",leftSection:(0,l.jsx)(y.Z,{size:"1.5rem",color:"#6A5ADF"}),placeholder:"Барааны нэр",...A.getInputProps("name"),mb:20}),(0,l.jsx)(r.Y,{label:"Барааны үнэ",leftSection:(0,l.jsx)(g.Z,{size:"1.5rem",color:"#6A5ADF"}),placeholder:"Барааны үнэ",...A.getInputProps("price"),mb:20,thousandSeparator:","}),(0,l.jsx)("h1",{className:"text-sm font-semibold ",children:"Зураг оруулах"}),(0,l.jsx)(j.fh,{onDrop:e=>console.log("accepted files",e),onReject:e=>console.log("rejected files",e),maxSize:3145728,accept:w.d1,children:(0,l.jsxs)(u.Z,{justify:"center",className:"border-2 border-[#6A5ADF] rounded-md border-dashed",gap:"xl",mih:220,style:{pointerEvents:"none"},children:[(0,l.jsx)(j.fh.Accept,{children:(0,l.jsx)(f,{style:{width:(0,c.h)(52),height:(0,c.h)(52),color:"var(--mantine-color-blue-6)"},stroke:1.5})}),(0,l.jsx)(j.fh.Reject,{children:(0,l.jsx)(x.Z,{style:{width:(0,c.h)(52),height:(0,c.h)(52),color:"var(--mantine-color-red-6)"},stroke:1.5})}),(0,l.jsx)(j.fh.Idle,{children:(0,l.jsx)(f,{style:{width:(0,c.h)(52),height:(0,c.h)(52),color:"var(--mantine-color-dimmed)"},stroke:1.5})}),(0,l.jsxs)("div",{children:[(0,l.jsx)(v.x,{size:"xl",inline:!0,children:"Drag images here or click to select files"}),(0,l.jsx)(v.x,{size:"sm",c:"dimmed",inline:!0,mt:7,children:"Attach as many files as you like, each file should not exceed 5mb"})]})]})}),(0,l.jsx)(u.Z,{justify:"center",mt:"md",children:(0,l.jsx)(m.z,{type:"submit",radius:9,color:"#6A5ADF",leftSection:(0,l.jsx)(b.Z,{}),children:"Хадгалах"})})]})})]}),(0,l.jsxs)("div",{className:"mx-6 w-2/5 space-y-6",children:[(0,l.jsx)("div",{className:"bg-white h-3/5 rounded-xl p-5"}),(0,l.jsx)("div",{className:"bg-white h-1/3 rounded-xl p-5"})]})]})}},32197:function(e,a,t){t.d(a,{x:function(){return j}});var l=t(67294),d={root:"m-b6d8b162"},o=t(69429),n=t(85565),i=t(43362),s=t(90987),r=t(39581),u=t(83050),c=t(13637),v=t(2979),m=Object.defineProperty,p=Object.defineProperties,h=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,a,t)=>a in e?m(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,__spreadValues=(e,a)=>{for(var t in a||(a={}))g.call(a,t)&&__defNormalProp(e,t,a[t]);if(y)for(var t of y(a))f.call(a,t)&&__defNormalProp(e,t,a[t]);return e},__spreadProps=(e,a)=>p(e,h(a)),__objRest=(e,a)=>{var t={};for(var l in e)g.call(e,l)&&0>a.indexOf(l)&&(t[l]=e[l]);if(null!=e&&y)for(var l of y(e))0>a.indexOf(l)&&f.call(e,l)&&(t[l]=e[l]);return t};let x={inherit:!1},b=(0,c.Z)((e,{variant:a,lineClamp:t,gradient:l,size:d,color:i})=>({root:{"--text-fz":(0,o.yv)(d),"--text-lh":(0,o.Dp)(d),"--text-gradient":"gradient"===a?(0,n.u)(l,e):void 0,"--text-line-clamp":"number"==typeof t?t.toString():void 0,"--text-color":i?(0,v.p)(i,e):void 0}})),j=(0,i.b)((e,a)=>{let t=(0,s.w)("Text",x,e),{lineClamp:o,truncate:n,inline:i,inherit:c,gradient:v,span:m,__staticSelector:p,vars:h,className:y,style:g,classNames:f,styles:j,unstyled:w,variant:Z,mod:_,size:M}=t,D=__objRest(t,["lineClamp","truncate","inline","inherit","gradient","span","__staticSelector","vars","className","style","classNames","styles","unstyled","variant","mod","size"]),I=(0,r.y)({name:["Text",p],props:t,classes:d,className:y,style:g,classNames:f,styles:j,unstyled:w,vars:h,varsResolver:b});return l.createElement(u.x,__spreadValues(__spreadProps(__spreadValues({},I("root",{focusable:!0})),{ref:a,component:m?"span":"p",variant:Z,mod:[{"data-truncate":"start"===n?"start":"end"===n||n?"end":void 0,"data-line-clamp":"number"==typeof o,"data-inline":i,"data-inherit":c},_],size:M}),D))});j.classes=d,j.displayName="@mantine/core/Text"},59375:function(e,a,t){t.d(a,{u:function(){return clamp}});function clamp(e,a,t){return void 0===a&&void 0===t?e:void 0!==a&&void 0===t?Math.max(e,a):void 0===a&&void 0!==t?Math.min(e,t):Math.min(Math.max(e,a),t)}}}]);