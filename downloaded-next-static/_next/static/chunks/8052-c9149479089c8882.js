"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8052],{32510:function(e,l,a){a.d(l,{Z:function(){return i}});var i=(0,a(30853).Z)("map","IconMap",[["path",{d:"M3 7l6 -3l6 3l6 -3v13l-6 3l-6 -3l-6 3v-13",key:"svg-0"}],["path",{d:"M9 4v13",key:"svg-1"}],["path",{d:"M15 7v13",key:"svg-2"}]])},74075:function(e,l,a){a.d(l,{Z:function(){return i}});var i=(0,a(30853).Z)("trash","IconTrash",[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]])},46708:function(e,l,a){var i=a(18992);let t="/api/v1";l.Z={delete:async(e,l,a)=>{var s,d,o,n,r;try{let d=await i.Z.delete("".concat(t,"/delete"),{params:{table:e,id:l,staff:a}});return{success:!0,data:null==d?void 0:null===(s=d.data)||void 0===s?void 0:s.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(d=o.data)||void 0===d?void 0:d.error)||(null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(n=r.data)||void 0===n?void 0:n.message)}}},deleteOrder:async(e,l)=>{var a,s,d,o,n;try{let s=await i.Z.delete("".concat(t,"/deleteOrder"),{params:{id:e,staff:l}});return{success:!0,data:null==s?void 0:null===(a=s.data)||void 0===a?void 0:a.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(d=e.response)||void 0===d?void 0:null===(s=d.data)||void 0===s?void 0:s.error)||(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(o=n.data)||void 0===o?void 0:o.message)}}},deleteItem:async(e,l)=>{var a,s,d,o,n;try{let s=await i.Z.delete("".concat(t,"/deleteItem"),{params:{id:e,staff:l}});return{success:!0,data:null==s?void 0:null===(a=s.data)||void 0===a?void 0:a.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(d=e.response)||void 0===d?void 0:null===(s=d.data)||void 0===s?void 0:s.error)||(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(o=n.data)||void 0===o?void 0:o.message)}}},deleteDelivery:async(e,l)=>{var a,s,d,o,n;try{let s=await i.Z.delete("".concat(t,"/deleteDelivery"),{params:{id:e,staff:l}});return{success:!0,data:null==s?void 0:null===(a=s.data)||void 0===a?void 0:a.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(d=e.response)||void 0===d?void 0:null===(s=d.data)||void 0===s?void 0:s.error)||(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(o=n.data)||void 0===o?void 0:o.message)}}},deleteBranch:async(e,l)=>{var a,s,d,o,n;try{let s=await i.Z.delete("".concat(t,"/deleteBranch"),{params:{id:e,staff:l}});return{success:!0,data:null==s?void 0:null===(a=s.data)||void 0===a?void 0:a.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(d=e.response)||void 0===d?void 0:null===(s=d.data)||void 0===s?void 0:s.error)||(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(o=n.data)||void 0===o?void 0:o.message)}}},deleteUser:async(e,l)=>{var a,s,d,o,n;try{let s=await i.Z.delete("".concat(t,"/deleteUser"),{params:{id:e,staff:l}});return{success:!0,data:null==s?void 0:null===(a=s.data)||void 0===a?void 0:a.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(d=e.response)||void 0===d?void 0:null===(s=d.data)||void 0===s?void 0:s.error)||(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(o=n.data)||void 0===o?void 0:o.message)}}},deleteWare:async(e,l)=>{var a,s,d,o,n;try{let s=await i.Z.delete("".concat(t,"/deleteWare"),{params:{id:e,staff:l}});return{success:!0,data:null==s?void 0:null===(a=s.data)||void 0===a?void 0:a.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(d=e.response)||void 0===d?void 0:null===(s=d.data)||void 0===s?void 0:s.error)||(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(o=n.data)||void 0===o?void 0:o.message)}}}}},46614:function(e,l,a){var i=a(18992),t=a(27484),s=a.n(t);let d="/api/v1";l.Z={find:async(e,l,a,t,o,n,r,c,u,v,m,h,p,x,g)=>{try{var y,j;let b=await i.Z.get("".concat(d,"/delivery"),{params:{startLimit:e,endLimit:l,order:a,sort:t,search:o,value:n,startDate:r?s()(r).format("YYYY-MM-DD 00:00:00"):null,endDate:c?s()(c).format("YYYY-MM-DD 23:59:59"):null,status:u,value1:v,value2:m,order1:h,order2:p,action:x,type:g}});return{success:!0,data:null==b?void 0:null===(y=b.data)||void 0===y?void 0:y.data,pagination:null==b?void 0:null===(j=b.data)||void 0===j?void 0:j.pagination}}catch(e){return{success:!1,e}}},findWithArchive:async(e,l,a,t,o,n,r,c,u,v,m,h,p,x)=>{try{var g,y;let j=await i.Z.get("".concat(d,"/deliveryWithArchive"),{params:{startLimit:e,endLimit:l,order:a,sort:t,search:o,value:n,startDate:r?s()(r).format("YYYY-MM-DD 00:00:00"):null,endDate:c?s()(c).format("YYYY-MM-DD 23:59:59"):null,status:u,value1:v,value2:m,order1:h,order2:p,action:x}});return{success:!0,data:null==j?void 0:null===(g=j.data)||void 0===g?void 0:g.data,pagination:null==j?void 0:null===(y=j.data)||void 0===y?void 0:y.pagination}}catch(e){return{success:!1,e}}},find_items_by_id:async e=>{var l,a,t,s,o;try{let a=await i.Z.get("".concat(d,"/getDelivery_items_by_id"),{params:{id:e}});return{success:!0,data:null==a?void 0:null===(l=a.data)||void 0===l?void 0:l.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.error)||(null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(s=o.data)||void 0===s?void 0:s.message)}}},getDelivery_items:async(e,l,a,t,s,o)=>{try{var n,r;let c=await i.Z.get("".concat(d,"/getDelivery_items"),{params:{startLimit:e,endLimit:l,order:a,sort:t,search:s,groupBy:o}});return{success:!0,data:null==c?void 0:null===(n=c.data)||void 0===n?void 0:n.data,pagination:null==c?void 0:null===(r=c.data)||void 0===r?void 0:r.pagination}}catch(e){return{success:!1,e}}},create:async(e,l)=>{var a,t,s,o,n;try{let t=await i.Z.post("".concat(d,"/createDelivery"),{...e,staff:l});return{success:!0,data:null==t?void 0:null===(a=t.data)||void 0===a?void 0:a.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.error)||(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(o=n.data)||void 0===o?void 0:o.message)}}},edit:async(e,l,a)=>{var t,s,o,n,r;try{let s=await i.Z.patch("".concat(d,"/editDelivery"),{id:e,...l,staff:a});return{success:!0,data:null==s?void 0:null===(t=s.data)||void 0===t?void 0:t.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(s=o.data)||void 0===s?void 0:s.error)||(null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(n=r.data)||void 0===n?void 0:n.message)}}},editReceivedMoney:async(e,l,a)=>{var t,s,o,n,r;try{let s=await i.Z.patch("".concat(d,"/editReceivedMoney"),{id:e,money:l,staff:a});return{success:!0,data:null==s?void 0:null===(t=s.data)||void 0===t?void 0:t.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(s=o.data)||void 0===s?void 0:s.error)||(null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(n=r.data)||void 0===n?void 0:n.message)}}},editDesc:async(e,l,a)=>{var t,s,o,n,r;try{let s=await i.Z.patch("".concat(d,"/editDesc"),{id:e,desc:l,field:a});return{success:!0,data:null==s?void 0:null===(t=s.data)||void 0===t?void 0:t.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(s=o.data)||void 0===s?void 0:s.error)||(null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(n=r.data)||void 0===n?void 0:n.message)}}},verify:async(e,l,a)=>{var t,s,o,n,r;try{let s=await i.Z.patch("".concat(d,"/verify"),{id:e,verify:l,staff:a});return{success:!0,data:null==s?void 0:null===(t=s.data)||void 0===t?void 0:t.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(s=o.data)||void 0===s?void 0:s.error)||(null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(n=r.data)||void 0===n?void 0:n.message)}}},getDeliveryrCustomer:async(e,l,a,t,o,n,r,c,u,v,m,h)=>{try{var p,x;let g=await i.Z.get("".concat(d,"/getDeliveryCustomer"),{params:{startLimit:e,endLimit:l,order:a,sort:t,search:o,value:n,startDate:r?s()(r).format("YYYY-MM-DD 00:00:00"):null,endDate:c?s()(c).format("YYYY-MM-DD 23:59:59"):null,status:u,id:v,action:m,type:h}});return{success:!0,data:null==g?void 0:null===(p=g.data)||void 0===p?void 0:p.data,pagination:null==g?void 0:null===(x=g.data)||void 0===x?void 0:x.pagination}}catch(e){return{success:!1,e}}},importExcel:async(e,l)=>{var a,t,s,o,n,r;try{let s=new FormData;s.append("excelFile",e);let o=await i.Z.post("".concat(d,"/uploadExcelFile"),s,{params:{staff:l}});return{status:null==o?void 0:null===(a=o.data)||void 0===a?void 0:a.status,message:null==o?void 0:null===(t=o.data)||void 0===t?void 0:t.message}}catch(e){return{status:null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(s=o.data)||void 0===s?void 0:s.status,message:null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(n=r.data)||void 0===n?void 0:n.message}}},bulkPrint:async e=>{try{var l,a;let t=await i.Z.post("".concat(d,"/changeStatusQR"),{params:{id:e}});return{success:!0,data:null==t?void 0:null===(l=t.data)||void 0===l?void 0:l.data,pagination:null==t?void 0:null===(a=t.data)||void 0===a?void 0:a.pagination}}catch(e){return{success:!1,e}}},checkDeliveryList:async(e,l,a)=>{try{var t,s;let o=await i.Z.get("".concat(d,"/checkDelivery"),{params:{startLimit:e,endLimit:l,search:a}});return{success:!0,data:null==o?void 0:null===(t=o.data)||void 0===t?void 0:t.data,pagination:null==o?void 0:null===(s=o.data)||void 0===s?void 0:s.pagination}}catch(e){return{success:!1,e}}}}},18052:function(e,l,a){var i=a(85893),t=a(32197),s=a(86414),d=a(47181),o=a(102),n=a(36616),r=a(23583),c=a(95085),u=a(90303),v=a(96034),m=a(95601),h=a(92256),p=a(15779),x=a(95124),g=a(67294),y=a(79153),j=a(85158),b=a(74075),f=a(32510),D=a(11163),w=a(60946),_=a(53907),N=a(88767),C=a(27484),k=a.n(C),A=a(26148),Z=a(60894),T=a(87412),S=a(46708),Y=a(38188),M=a(59142),F=a(46614),P=a(69505),E=a(54073),I=a(43681),z=a(72372);l.Z=e=>{var l,a,C,O,V,R,Q,W,L,U,B;let{type:H,title:q}=e,[X,G]=(0,g.useState)([]),{user:J}=(0,I.a)(),[K,$]=(0,g.useState)(!1),[ee,el]=(0,g.useState)(!1),[ea,ei]=(0,g.useState)(""),et=(0,D.useRouter)(),[es,ed]=(0,g.useState)(100),[eo,en]=(0,g.useState)(0),[er,ec]=(0,g.useState)(0),[eu,ev]=(0,g.useState)(""),[em,eh]=(0,g.useState)("asc"),[ep,ex]=(0,g.useState)(""),[eg]=(0,_.c)(ep,200),[ey,ej]=(0,g.useState)(null),[eb,ef]=(0,g.useState)(null),[eD,ew]=(0,g.useState)(!1),[e_,eN]=(0,g.useState)(null),[eC,ek]=(0,g.useState)(""),[eA,eZ]=(0,g.useState)(0),{data:eT,refetch:eS,isLoading:eY}=(0,N.useQuery)(["delivery-list",es,eo,eu,em,eg,ea,ey,eb,eA,H],()=>(null==J?void 0:J.role)==="admin"||(null==J?void 0:J.role)==="manager"||(null==J?void 0:J.role)==="operator"||(null==J?void 0:J.role)==="nyagtlan"?F.Z.find(er,es,eu,em,eg,ea,ey,eb,1,void 0,void 0,void 0,void 0,eA,H):Promise.reject(),{enabled:(null==J?void 0:J.role)==="admin"||(null==J?void 0:J.role)==="manager"||(null==J?void 0:J.role)==="operator"||(null==J?void 0:J.role)==="nyagtlan"}),{data:eM,isLoading:eF,refetch:eP}=(0,N.useQuery)(["customer-by-id-delivery",es,eo,eu,em,eg,ea,ey,eb,J,eA,H],()=>F.Z.getDeliveryrCustomer(er,es,eu,em,eg,ea,ey,eb,1,null==J?void 0:J.user_id,eA,H),{enabled:(null==J?void 0:J.role)=="customer"}),{data:eE}=(0,N.useQuery)(["region-list"],()=>Z.Z.find(),{enabled:(null==J?void 0:J.role)!="customer",staleTime:6e5,cacheTime:12e5}),{data:eI}=(0,N.useQuery)(["user-list"],()=>A.Z.find(),{enabled:eC.length>2,staleTime:6e5,cacheTime:12e5}),handleCheckboxChange=e=>{G(l=>{if("selectAll"===e){var a,i,t,s,d,o;return l.length<((null==eT?void 0:null===(i=eT.data)||void 0===i?void 0:null===(a=i.result)||void 0===a?void 0:a.length)||(null==eM?void 0:null===(s=eM.data)||void 0===s?void 0:null===(t=s.result)||void 0===t?void 0:t.length))?((null==eT?void 0:null===(d=eT.data)||void 0===d?void 0:d.result)||(null==eM?void 0:null===(o=eM.data)||void 0===o?void 0:o.result)).map(e=>e.id):[]}return l.includes(e)?l.filter(l=>l!==e):[...l,e]})},ez=(0,N.useMutation)(["delete-order"],e=>e?S.Z.deleteDelivery(e,null==J?void 0:J.last_name):S.Z.deleteDelivery(X,null==J?void 0:J.last_name),{onSuccess(e){(null==e?void 0:e.success)===!0?(eS(),eP(),G([]),(0,w.PV)({message:"Хүргэлт устгагдлаа",status:!0})):(0,w.PV)({message:null==e?void 0:e.e,status:!1})}}),eO=(0,N.useMutation)(["excel-import"],()=>F.Z.importExcel(e_,null==J?void 0:J.last_name),{onSuccess(e){(null==e?void 0:e.status)===!1?(0,w.PV)({message:null==e?void 0:e.message,status:!1}):((0,w.PV)({message:"Excel imported.",status:!0}),eS(),eP())}}),handleUpload=()=>{e_&&(null==eO||eO.mutateAsync())};(0,g.useEffect)(()=>{e_&&handleUpload()},[e_]);let handleDelete=e=>{Y.qk.openConfirmModal({title:"Хүргэлт",centered:!0,children:(0,i.jsx)(t.x,{size:"sm",children:"Та энэ хүргэлт устгахдаа итгэлтэй байна уу?"}),confirmProps:{color:"#6A5ADF"},labels:{confirm:"Тийм",cancel:"Үгүй"},onConfirm:async()=>{await (null==ez?void 0:ez.mutateAsync(e))}})},{data:eV}=(0,N.useQuery)(["selected-data-delivery",X,eA],()=>z.Z.findDelivery(X,eA),{enabled:(null==X?void 0:X.length)>0}),getProductNames=e=>{var l,a,i;let t=((null==X?void 0:X.length)>0?null==eV?void 0:null===(l=eV.data)||void 0===l?void 0:l.resultItem:(null==eT?void 0:null===(a=eT.data)||void 0===a?void 0:a.resultItem)||(null==eM?void 0:null===(i=eM.data)||void 0===i?void 0:i.resultItem)||[]).filter(l=>(null==l?void 0:l.delivery_id)==e).map(e=>"".concat(null==e?void 0:e.name," - ").concat(null==e?void 0:e.quantity));return t.join(", ")};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"bg-white rounded-xl p-3",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)(w.bo,{text:q}),(0,i.jsxs)("div",{className:"gap-4 sm:flex hidden",children:[(0,i.jsx)(s.o,{className:"w-96",placeholder:"Хайх ...",value:ep,onChange:e=>{ex(e.target.value)},rightSection:(0,i.jsx)(y.Z,{color:"#6A5ADF",className:"cursor-pointer"})}),(0,i.jsx)(M.Z,{setAction:eZ,action:eA,data:(null==X?void 0:X.length)>0?X:(null==eT?void 0:eT.data)||(null==eM?void 0:eM.data),select:(null==X?void 0:X.length)>0}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(d.z,{color:"#6A5ADF",radius:9,leftSection:(0,i.jsx)("img",{src:"/icons/excel.svg",alt:"excel"}),onClick:()=>{ew(e=>!e),eZ(1)},children:"Excel"}),(0,i.jsxs)(o.U,{in:eD,className:"absolute right-0 rounded-lg border border-indigo-300 space-y-2 p-3 w-44 h-auto bg-white z-40 font-bold text-sm text-indigo-600",children:[(0,i.jsxs)("button",{disabled:eY||eF,className:"flex items-center space-x-2 mb-2 pb-2 border-b cursor-pointer",onClick:()=>{var e,l,a;return(0,w.pq)("delivery-excel",((null==X?void 0:X.length)>0?null==eV?void 0:null===(e=eV.data)||void 0===e?void 0:e.result:(null==eT?void 0:null===(l=eT.data)||void 0===l?void 0:l.result)||(null==eM?void 0:null===(a=eM.data)||void 0===a?void 0:a.result)).map(e=>({Дэлгүүрийн_нэр:e.shop_name,Нэр:e.cus_name,Утас:e.cus_phone,Хаяг:"".concat(e.city?null==e?void 0:e.city:""," ").concat(e.district?null==e?void 0:e.district:""," ").concat(e.committee?null==e?void 0:e.committee:""," ").concat(e.street?e.street:""," ").concat(e.toot?null==e?void 0:e.toot:""," ").concat(e.addition?null==e?void 0:e.addition:""),Төлөв:1==e.status?"Бүртгэгдсэн":2==e.status?"Хүлээн авсан":3==e.status?"Жолоочид хувиарласан":5==e.status?"Хүлээгдэж буй":10==e.status?"Хүргэгдсэн":11==e.status?"Цуцалсан":12==e.status?"Буцаасан":null,Үүсгэсэн:k()(e.created_at||"").format("YYYY-MM-DD HH:mm")||"",Төрөл:e.type,Барааны_төрөл:e.item_type,Тайлбар:e.deli_desc||"",Нийт_үнэ:e.total_price||"",Бараа:getProductNames(e.code)})))},children:[(0,i.jsx)("img",{src:"/icons/excel-color.svg",alt:"icon"}),(0,i.jsx)("p",{children:"Export to Excel"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2 pb-2 ml-[-8px] border-b cursor-pointer",children:[(0,i.jsx)("input",{type:"file",name:"file",id:"excelFileInput",accept:".xlsx, .xls",className:"hidden",onChange:e=>{eN(e.target.files[0])}}),(0,i.jsx)("img",{src:"/icons/excel-color.svg",className:"cursor-pointer",alt:"icon",onClick:()=>{let e=document.getElementById("excelFileInput");e&&e.click()}}),(0,i.jsx)("p",{onClick:()=>{let e=document.getElementById("excelFileInput");e&&e.click()},className:"cursor-pointer",children:"Import to Excel"})]})]})]}),(0,i.jsx)(d.z,{color:"#6A5ADF",radius:9,leftSection:(0,i.jsx)("img",{src:"/icons/plus.svg",alt:"plus"}),onClick:()=>et.push("/delivery/create"),children:"Шинэ хүргэлт бүртгэх"})]})]}),(0,i.jsx)("div",{className:"border-b border-[#6A5ADF] w-full mt-2 mb-1"}),(0,i.jsxs)("div",{className:"relative sm:flex block items-center mr-12 gap-4",children:[(0,i.jsx)("div",{className:"text-sm",children:(0,i.jsx)(E.W,{label:"Эхлэх огноо",placeholder:"yyyy-mm-dd",valueFormat:"YYYY-MM-DD",value:ey,onChange:ej,clearable:!0})}),(0,i.jsx)("div",{className:"text-sm",children:(0,i.jsx)(E.W,{label:"Дуусах огноо",placeholder:"yyyy-mm-dd",valueFormat:"YYYY-MM-DD",value:eb,onChange:ef,clearable:!0})}),(null==J?void 0:J.role)!=="customer"&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.P,{label:"Бүс",data:((null==eE?void 0:eE.data)||[]).map(e=>({value:null==e?void 0:e.name.toString(),label:(null==e?void 0:e.name)||""})),onChange:e=>{ev("delivery.region"),ei(e),eh("")},clearable:!0,placeholder:"Бүгд"}),(0,i.jsx)(n.P,{label:"Харилцагч",searchable:!0,data:((null==eI?void 0:eI.data)||[]).filter(e=>(null==e?void 0:e.role)==="customer").map(e=>({value:null==e?void 0:e.shop_name.toString(),label:(null==e?void 0:e.shop_name)||""})),onSearchChange:e=>{ek(e)},onChange:e=>{ev("users.shop_name"),ei(e),eh("")},clearable:!0,placeholder:"Бүгд"})]}),(0,i.jsx)(r.u,{label:"Шүүлтүүр цэвэрлэх",children:(0,i.jsx)("div",{className:"mt-6 cursor-pointer p-1 rounded-sm border sm:block hidden",onClick:()=>{ev(""),eh(""),ei(""),ej(null),ef(null),et.reload()},children:(0,i.jsx)("img",{src:"/icons/filter-clear.svg",alt:"filterClear"})})})]}),(0,i.jsx)("div",{className:"border-1 border-b border-[#6A5ADF] mt-2"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(c.f,{visible:(null==J?void 0:J.role)==="customer"?eF:eY}),(0,i.jsx)(c.f,{visible:eO.isLoading}),(0,i.jsx)(u.x,{className:"h-[70vh]",color:"#6A5ADF",children:(0,i.jsxs)(v.i,{children:[(0,i.jsx)(v.i.Thead,{className:"sticky top-0 bg-white z-40",children:(0,i.jsxs)(v.i.Tr,{children:[(0,i.jsx)(v.i.Th,{className:"sticky left-0 bg-white",children:(0,i.jsx)(m.X,{checked:X.length===((null==eT?void 0:null===(a=eT.data)||void 0===a?void 0:null===(l=a.result)||void 0===l?void 0:l.length)||(null==eM?void 0:null===(O=eM.data)||void 0===O?void 0:null===(C=O.result)||void 0===C?void 0:C.length)),onChange:()=>{handleCheckboxChange("selectAll"),eZ(0)},color:"#6A5ADF"})}),(0,i.jsx)(v.i.Th,{children:"#"}),(0,i.jsx)(v.i.Th,{miw:150,children:(0,i.jsxs)("div",{className:"flex justify-between",children:["Огноо",(0,i.jsx)("img",{src:"/icons/sort.svg",alt:"sort",onClick:()=>{ev("delivery.created_at"),"desc"===em?eh("asc"):eh("desc")},className:"cursor-pointer hover:bg-gray-100 hover:rounded-md"})]})}),(0,i.jsx)(v.i.Th,{miw:140,children:(0,i.jsxs)("div",{className:"flex justify-between",children:["Харилцагч",(0,i.jsx)("img",{src:"/icons/sort.svg",alt:"sort",onClick:()=>{ev("users.shop_name"),"desc"===em?eh("asc"):eh("desc")},className:"cursor-pointer hover:bg-gray-100 hover:rounded-md"})]})}),(0,i.jsx)(v.i.Th,{miw:130,children:(0,i.jsxs)("div",{className:"flex justify-between",children:["Хэрэглэгч",(0,i.jsx)("img",{src:"/icons/sort.svg",alt:"sort",onClick:()=>{ev("delivery.cus_name"),"desc"===em?eh("asc"):eh("desc")},className:"cursor-pointer hover:bg-gray-100 hover:rounded-md"})]})}),(0,i.jsx)(v.i.Th,{miw:100,children:(0,i.jsxs)("div",{className:"flex justify-between",children:["Утас",(0,i.jsx)("img",{src:"/icons/sort.svg",alt:"sort",onClick:()=>{ev("delivery.cus_phone"),"desc"===em?eh("asc"):eh("desc")},className:"cursor-pointer hover:bg-gray-100 hover:rounded-md"})]})}),(0,i.jsx)(v.i.Th,{miw:300,children:(0,i.jsxs)("div",{className:"flex justify-between",children:["Хаяг",(0,i.jsx)("img",{src:"/icons/sort.svg",alt:"sort",onClick:()=>{ev("delivery.district"),"desc"===em?eh("asc"):eh("desc")},className:"cursor-pointer hover:bg-gray-100 hover:rounded-md"})]})}),(0,i.jsx)(v.i.Th,{miw:100,children:(0,i.jsxs)("div",{className:"flex justify-between",children:["Үнэ",(0,i.jsx)("img",{src:"/icons/sort.svg",alt:"sort",onClick:()=>{ev("delivery.total_price"),"desc"===em?eh("asc"):eh("desc")},className:"cursor-pointer hover:bg-gray-100 hover:rounded-md"})]})}),(0,i.jsx)(v.i.Th,{miw:100,children:"Бүс"}),(0,i.jsx)(v.i.Th,{miw:90,children:"Төлөв"}),(0,i.jsx)(v.i.Th,{miw:200,children:"Нэмэлт тайлбар"}),(0,i.jsx)(v.i.Th,{miw:150,children:(0,i.jsxs)("div",{className:"flex justify-between",children:["Хүргэлт ID",(0,i.jsx)("img",{src:"/icons/sort.svg",alt:"sort",onClick:()=>{ev("delivery.code"),"desc"===em?eh("asc"):eh("desc")},className:"cursor-pointer hover:bg-gray-100 hover:rounded-md"})]})}),(0,i.jsx)(v.i.Th,{miw:160,children:"Мессеж үйлчилгээ"}),(0,i.jsx)(v.i.Th,{className:"sticky right-0 bg-white",children:"Үйлдэл"})]})}),(0,i.jsx)(v.i.Tbody,{children:(null==eT?void 0:null===(R=eT.data)||void 0===R?void 0:null===(V=R.result)||void 0===V?void 0:V.length)>0||(null==eM?void 0:null===(W=eM.data)||void 0===W?void 0:null===(Q=W.result)||void 0===Q?void 0:Q.length)?null===(L=(null==eT?void 0:null===(U=eT.data)||void 0===U?void 0:U.result)||(null==eM?void 0:null===(B=eM.data)||void 0===B?void 0:B.result))||void 0===L?void 0:L.map((e,l)=>(0,i.jsxs)(v.i.Tr,{children:[(0,i.jsx)(v.i.Td,{className:"sticky left-0 bg-white",children:(0,i.jsx)(m.X,{color:"#6A5ADF",checked:X.includes(null==e?void 0:e.id),onChange:()=>{handleCheckboxChange(null==e?void 0:e.id),eZ(0)}})}),(0,i.jsx)(v.i.Td,{children:l+1}),(0,i.jsx)(v.i.Td,{children:k()(null==e?void 0:e.created_at).format("YYYY/MM/DD HH:mm")}),(0,i.jsx)(v.i.Td,{maw:200,children:null==e?void 0:e.shop_name}),(0,i.jsx)(v.i.Td,{maw:200,children:null==e?void 0:e.cus_name}),(0,i.jsx)(v.i.Td,{maw:200,children:null==e?void 0:e.cus_phone}),(0,i.jsx)(v.i.Td,{maw:200,children:"".concat((null==e?void 0:e.city)||""," ").concat((null==e?void 0:e.district)||""," ").concat((null==e?void 0:e.committee)||""," ").concat((null==e?void 0:e.town)||""," ").concat((null==e?void 0:e.street)||""," ").concat((null==e?void 0:e.toot)||""," ").concat((null==e?void 0:e.addition)||"")}),(0,i.jsx)(v.i.Td,{maw:100,children:(0,w.uf)(null==e?void 0:e.total_price)}),(0,i.jsx)(v.i.Td,{children:null==e?void 0:e.region}),(0,i.jsx)(v.i.Td,{children:(null==e?void 0:e.status)==1?(0,i.jsx)(h.C,{color:"#6A5ADF",children:"Бүртгэгдсэн"}):(0,i.jsx)(h.C,{color:"yellow",children:"Жолоочид хуваарилсан"})}),(0,i.jsx)(v.i.Td,{children:(null==e?void 0:e.deli_desc)||""}),(0,i.jsx)(v.i.Td,{maw:200,children:null==e?void 0:e.code}),(0,i.jsx)(v.i.Td,{children:1==e.send_message?(0,i.jsx)(h.C,{color:"green",children:"Тийм"}):(0,i.jsx)(h.C,{color:"red",children:"Үгүй"})}),(0,i.jsxs)(v.i.Td,{className:"flex justify-center items-center space-x-2 sticky right-0 bg-white",children:[(0,i.jsx)(p.A,{color:"yellow",onClick:()=>et.push("/delivery/".concat(null==e?void 0:e.id,"/",!0)),children:(0,i.jsx)(r.u,{label:"Дэлгэрэнгүй харах",children:(0,i.jsx)(j.Z,{})})}),(null==J?void 0:J.role)!=="nyagtlan"&&(0,i.jsx)(p.A,{color:"red",onClick:l=>{l.preventDefault(),l.stopPropagation(),handleDelete(null==e?void 0:e.id)},children:(0,i.jsx)(r.u,{label:"Устгах",children:(0,i.jsx)(b.Z,{})})})]})]},"orderData-".concat(l))):(0,i.jsx)(v.i.Tr,{children:(0,i.jsx)(v.i.Td,{colSpan:12,className:"text-center",children:"Мэдээлэл олдсонгүй"})})})]})}),(0,i.jsx)("div",{className:"border-b border-[#6A5ADF] w-full my-1"}),(0,i.jsxs)("div",{className:"sm:flex hidden justify-between items-center my-1",children:[(0,i.jsxs)("p",{className:"text-sm text-[#6A5ADF]",children:["Нийт ",null==X?void 0:X.length," мөр сонгосон байна"]}),(0,i.jsxs)("p",{className:"flex items-center text-sm text-[#6A5ADF]",children:["Нэг хуудсанд харуулах мөрийн тоо",(0,i.jsxs)("select",{className:"w-12 rounded-md ml-2 pl-0.5 h-6 border border-[#6A5ADF]",onChange:e=>{ed(e.target.value),en(0),ec(0)},children:[(0,i.jsx)("option",{value:"100",children:"100"}),(0,i.jsx)("option",{value:"250",children:"250"}),(0,i.jsx)("option",{value:"500",children:"500"}),(0,i.jsx)("option",{value:"100",children:"100"})]})]})]}),(0,i.jsxs)("div",{className:"sm:flex block mt-4 items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex gap-2",children:[((null==J?void 0:J.role)==="admin"||(null==J?void 0:J.role)=="operator"||(null==J?void 0:J.role)=="manager")&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.z,{leftSection:(0,i.jsx)("img",{src:"/icons/list.svg",alt:"list"}),color:"#6A5ADF",radius:9,onClick:()=>$(!0),disabled:X.length<=0,children:"Төлөв солих"}),(0,i.jsx)(d.z,{leftSection:(0,i.jsx)(f.Z,{size:"1.4rem"}),color:"#6A5ADF",radius:9,onClick:()=>el(!0),disabled:X.length<=0,children:"Бүс солих"})]}),((null==J?void 0:J.role)=="admin"||(null==J?void 0:J.role)=="customer"||(null==J?void 0:J.role)=="manager"||(null==J?void 0:J.role)=="operator")&&(0,i.jsx)(d.z,{leftSection:(0,i.jsx)(b.Z,{size:"1.4rem"}),color:"#6A5ADF",radius:9,onClick:e=>{e.preventDefault(),e.stopPropagation(),handleDelete()},disabled:X.length<=0,children:"Устгах"})]}),(0,i.jsx)(x.t,{value:eo+1,siblings:2,total:Math.floor(((null==eT?void 0:eT.pagination)||(null==eM?void 0:eM.pagination))/es)+(((null==eT?void 0:eT.pagination)||(null==eM?void 0:eM.pagination))%es==0?0:1),onChange:e=>{en(e-1),ec(e*es-es)},color:"#6A5ADF"})]})]}),(0,i.jsx)(P.Z,{opened:ee,onClose:()=>el(!1),select:X,refetch:eS,setSelect:G,data:null==eE?void 0:eE.data,table:"delivery"}),(0,i.jsx)(T.Z,{table:"delivery",opened:K,onClose:()=>$(!1),select:X,setSelect:G,refetch:eS,data:[{label:"Хүлээн авсан",value:2}]})]})})}},69505:function(e,l,a){var i=a(85893),t=a(98298),s=a(43681),d=a(60946),o=a(42099),n=a(36616),r=a(70140),c=a(47181),u=a(88198),v=a(67294),m=a(88767);l.Z=e=>{var l;let{opened:a,onClose:h,select:p,refetch:x,setSelect:g,data:y,table:j}=e,[b,f]=(0,v.useState)(),{user:D}=(0,s.a)(),w=(0,m.useMutation)(["change-region"],()=>t.Z.changeRegion(p,b,j,null==D?void 0:D.last_name),{onSuccess(e){(null==e?void 0:e.success)===!0?(x(),h(),g([]),(0,d.PV)({message:"Бүс солигдлоо",status:!0})):(0,d.PV)({message:null==e?void 0:e.e,status:!1})}}),handleSumit=()=>{w.mutateAsync()};return(0,i.jsxs)(o.u,{opened:a,onClose:h,title:"Бүс солих",className:"space-y-10",children:[(0,i.jsx)(n.P,{label:"Бүсүүд",searchable:!0,clearable:!0,placeholder:"Бүс сонгоно уу",data:null===(l=y||[])||void 0===l?void 0:l.map(e=>{var l;return{value:null==e?void 0:null===(l=e.name)||void 0===l?void 0:l.toString(),label:(null==e?void 0:e.name)||""}}),onChange:e=>f(e)}),(0,i.jsx)(r.Z,{justify:"end",children:(0,i.jsx)(c.z,{leftSection:(0,i.jsx)(u.Z,{}),color:"#6A5ADF",radius:"md",className:"mt-4",type:"submit",disabled:null==w?void 0:w.isLoading,loading:null==w?void 0:w.isLoading,onClick:()=>handleSumit(),children:"Хадгалах"})})]})}},32197:function(e,l,a){a.d(l,{x:function(){return f}});var i=a(67294),t={root:"m-b6d8b162"},s=a(69429),d=a(85565),o=a(43362),n=a(90987),r=a(39581),c=a(83050),u=a(13637),v=a(2979),m=Object.defineProperty,h=Object.defineProperties,p=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,l,a)=>l in e?m(e,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[l]=a,__spreadValues=(e,l)=>{for(var a in l||(l={}))g.call(l,a)&&__defNormalProp(e,a,l[a]);if(x)for(var a of x(l))y.call(l,a)&&__defNormalProp(e,a,l[a]);return e},__spreadProps=(e,l)=>h(e,p(l)),__objRest=(e,l)=>{var a={};for(var i in e)g.call(e,i)&&0>l.indexOf(i)&&(a[i]=e[i]);if(null!=e&&x)for(var i of x(e))0>l.indexOf(i)&&y.call(e,i)&&(a[i]=e[i]);return a};let j={inherit:!1},b=(0,u.Z)((e,{variant:l,lineClamp:a,gradient:i,size:t,color:o})=>({root:{"--text-fz":(0,s.yv)(t),"--text-lh":(0,s.Dp)(t),"--text-gradient":"gradient"===l?(0,d.u)(i,e):void 0,"--text-line-clamp":"number"==typeof a?a.toString():void 0,"--text-color":o?(0,v.p)(o,e):void 0}})),f=(0,o.b)((e,l)=>{let a=(0,n.w)("Text",j,e),{lineClamp:s,truncate:d,inline:o,inherit:u,gradient:v,span:m,__staticSelector:h,vars:p,className:x,style:g,classNames:y,styles:f,unstyled:D,variant:w,mod:_,size:N}=a,C=__objRest(a,["lineClamp","truncate","inline","inherit","gradient","span","__staticSelector","vars","className","style","classNames","styles","unstyled","variant","mod","size"]),k=(0,r.y)({name:["Text",h],props:a,classes:t,className:x,style:g,classNames:y,styles:f,unstyled:D,vars:p,varsResolver:b});return i.createElement(c.x,__spreadValues(__spreadProps(__spreadValues({},k("root",{focusable:!0})),{ref:l,component:m?"span":"p",variant:w,mod:[{"data-truncate":"start"===d?"start":"end"===d||d?"end":void 0,"data-line-clamp":"number"==typeof s,"data-inline":o,"data-inherit":u},_],size:N}),C))});f.classes=t,f.displayName="@mantine/core/Text"}}]);