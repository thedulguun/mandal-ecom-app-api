(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8527],{89081:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var n=(0,r(30853).Z)("device-mobile","IconDeviceMobile",[["path",{d:"M6 5a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M11 4h2",key:"svg-1"}],["path",{d:"M12 17v.01",key:"svg-2"}]])},32510:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var n=(0,r(30853).Z)("map","IconMap",[["path",{d:"M3 7l6 -3l6 3l6 -3v13l-6 3l-6 -3l-6 3v-13",key:"svg-0"}],["path",{d:"M9 4v13",key:"svg-1"}],["path",{d:"M15 7v13",key:"svg-2"}]])},2891:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var n=(0,r(30853).Z)("map-pin","IconMapPin",[["path",{d:"M9 11a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-0"}],["path",{d:"M17.657 16.657l-4.243 4.243a2 2 0 0 1 -2.827 0l-4.244 -4.243a8 8 0 1 1 11.314 0z",key:"svg-1"}]])},81421:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var n=(0,r(30853).Z)("phone-call","IconPhoneCall",[["path",{d:"M5 4h4l2 5l-2.5 1.5a11 11 0 0 0 5 5l1.5 -2.5l5 2v4a2 2 0 0 1 -2 2a16 16 0 0 1 -15 -15a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M15 7a2 2 0 0 1 2 2",key:"svg-1"}],["path",{d:"M15 3a6 6 0 0 1 6 6",key:"svg-2"}]])},58310:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/branch/[id]",function(){return r(72446)}])},60894:function(e,t,r){"use strict";var n=r(18992);let a="/api/v1";t.Z={find:async()=>{try{var e;let t=await n.Z.get("".concat(a,"/region"));return{success:!0,data:null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.data}}catch(e){return{success:!1,e}}},create:async(e,t)=>{var r,l,o,i,s;try{let l=await n.Z.post("".concat(a,"/createRegion"),{...e,staff:t});return{success:!0,data:null==l?void 0:null===(r=l.data)||void 0===r?void 0:r.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(l=o.data)||void 0===l?void 0:l.error)||(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(i=s.data)||void 0===i?void 0:i.message)}}}}},72446:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return A}});var n=r(85893),a=r(26148),l=r(74886),o=r(60894),i=r(43681),s=r(60946),d=r(25832),u=r(95085),c=r(86414),p=r(36616),f=r(94694),m=r(70140),v=r(47181),h=r(10330),b=r(2891),g=r(32510),x=r(75928),y=r(81421),_=r(89081),j=r(88198),w=r(11163),S=r(67294),P=r(88767),edit=e=>{let{current:t,refetch:r}=e,{user:z}=(0,i.a)(),N=(0,w.useRouter)(),R=(0,h.c)({initialValues:{city:null==t?void 0:t.city,district:null==t?void 0:t.district,committee:null==t?void 0:t.committee,name:null==t?void 0:t.name,street:null==t?void 0:t.street,toot:null==t?void 0:t.toot,region:null==t?void 0:t.region,branch_address:null==t?void 0:t.branch_address,branch_phone:null==t?void 0:t.branch_phone,branch_phone1:null==t?void 0:t.branch_phone1,branch_addition:null==t?void 0:t.branch_addition}});(0,S.useEffect)(()=>{R.values.city!==(null==t?void 0:t.city)&&(R.setFieldValue("district",null),R.setFieldValue("committee",null))},[R.values.city]),(0,S.useEffect)(()=>{R.values.district!==(null==t?void 0:t.district)&&R.setFieldValue("committee",null)},[R.values.district]);let{data:A}=(0,P.useQuery)(["khoroo-list",R.values.district],()=>R.values.district?l.Z.find(R.values.district):Promise.reject()),{data:Z}=(0,P.useQuery)(["region-list"],()=>o.Z.find()),F=(0,P.useMutation)(["edit-branch"],e=>a.Z.editBranch(null==t?void 0:t.branch_id,e,null==z?void 0:z.last_name),{onSuccess(e){(null==e?void 0:e.success)===!0?(N.push("/branch"),r(),(0,s.PV)({message:"Салбар шинэчлэгдлээ.",status:!0})):(0,s.PV)({message:null==e?void 0:e.e,status:!1})}}),handleSubmit=e=>{null==F||F.mutateAsync(e)};return(0,n.jsxs)("form",{onSubmit:R.onSubmit(e=>handleSubmit(e)),children:[(0,n.jsx)(u.f,{visible:F.isLoading}),(0,n.jsx)(c.o,{label:"Салбарын нэр",placeholder:"Салбарын нэр оруулна уу",mb:20,className:"w-1/2",...R.getInputProps("name"),required:!0}),(0,n.jsxs)("div",{className:"flex gap-4",children:[(0,n.jsx)(p.P,{data:(d.n||[]).map(e=>({label:(null==e?void 0:e.value)||"",value:null==e?void 0:e.value.toString()})),...R.getInputProps("city"),label:"Хот/аймаг",leftSection:(0,n.jsx)(b.Z,{size:"1.5rem",color:"#6A5ADF"}),placeholder:"Заавал бөглөх",mb:20,clearable:!0,className:"w-full"}),(0,n.jsx)(p.P,{label:"Cум/дүүрэг",searchable:!0,nothingFoundMessage:"Хот/аймаг сонгоно уу!",data:(d.g||[]).filter(e=>e.value===R.values.city).map(e=>({label:(null==e?void 0:e.label)||"",value:null==e?void 0:e.label.toString()})),clearable:!0,...R.getInputProps("district"),leftSection:(0,n.jsx)(b.Z,{size:"1.5rem",color:"#6A5ADF"}),placeholder:"Заавал бөглөх",mb:20,className:"w-full"})]}),(0,n.jsxs)("div",{className:"flex gap-4",children:[(0,n.jsx)(p.P,{label:"Баг/хороо",searchable:!0,clearable:!0,nothingFoundMessage:"Сум/дүүрэг сонгоно уу!",data:((null==A?void 0:A.data)||[]).map(e=>({label:(null==e?void 0:e.name)||"",value:null==e?void 0:e.name.toString()})),leftSection:(0,n.jsx)(b.Z,{size:"1.5rem",color:"#6A5ADF"}),placeholder:"Заавал бөглөх",mb:20,...R.getInputProps("committee"),className:"w-full"}),(0,n.jsx)(p.P,{label:"Бүс",data:((null==Z?void 0:Z.data)||[]).map(e=>({value:(null==e?void 0:e.name)||"",label:(null==e?void 0:e.name)||""})),clearable:!0,leftSection:(0,n.jsx)(g.Z,{size:"1.5rem",color:"#6A5ADF"}),placeholder:"Заавал бөглөх",...R.getInputProps("region"),mb:20,className:"w-full"})]}),(0,n.jsx)(c.o,{label:"Хотхон - Байр/барилга (Заавал биш)",leftSection:(0,n.jsx)(x.Z,{size:"1.5rem",color:"#6A5ADF"}),placeholder:"Жн: Алтай хотхон 8р байр...",...R.getInputProps("branch_address"),mb:20,className:"w-full"}),(0,n.jsxs)("div",{className:"flex gap-4",children:[(0,n.jsx)(c.o,{label:"Орц/гудамж",leftSection:(0,n.jsx)(b.Z,{size:"1.5rem",color:"#6A5ADF"}),placeholder:"Жн: 4р орц",...R.getInputProps("street"),mb:20,className:"w-full"}),(0,n.jsx)(c.o,{label:"Давхар-тоот",leftSection:(0,n.jsx)(b.Z,{size:"1.5rem",color:"#6A5ADF"}),placeholder:"Жн: 12 давхар1205 тоот",...R.getInputProps("toot"),mb:20,className:"w-full"})]}),(0,n.jsxs)("div",{className:"flex gap-4",children:[(0,n.jsx)(c.o,{label:"Салбарын дугаар",leftSection:(0,n.jsx)(y.Z,{size:"1.5rem",color:"#6A5ADF"}),placeholder:"Холбогдох дугаар",...R.getInputProps("branch_phone"),mb:20,type:"number",className:"w-full"}),(0,n.jsx)(c.o,{label:" ",leftSection:(0,n.jsx)(_.Z,{size:"1.5rem",color:"#6A5ADF"}),placeholder:"Яаралтай үед холбогдох дугаар",...R.getInputProps("branch_phone1"),mb:20,type:"number",className:"w-full"})]}),(0,n.jsx)(f.g,{label:"Хаяг нэмэлт мэдээлэл",placeholder:"Жн: Орцны код нь 1234 шүү, Анхаар нохойтой гэх мэт ...",...R.getInputProps("branch_addition"),mb:20,className:"w-full"}),(0,n.jsx)(m.Z,{justify:"end",mt:"md",children:(0,n.jsx)(v.z,{type:"submit",radius:9,color:"#6A5ADF",leftSection:(0,n.jsx)(j.Z,{}),children:"Хадгалах"})})]})},z=r(34085),N=r(25130),R=r(83050);let Edit=()=>{let e=(0,w.useRouter)(),{data:t,refetch:r,isLoading:l}=(0,P.useQuery)(["order-list",e.query.id],()=>e.query.id?a.Z.getBranchById(e.query.id):Promise.reject());return(0,n.jsxs)("div",{children:[(0,n.jsx)(v.z,{color:"#6A5ADF",radius:"md",size:"xs",leftSection:(0,n.jsx)("img",{src:"/icons/arrow-left-light.svg",className:"stroke-white",alt:"icon"}),onClick:()=>e.back(),children:"Буцах"}),(0,n.jsx)("div",{className:"w-3/5 mt-4 bg-white rounded-xl p-5 mb-6",children:(0,n.jsxs)(R.x,{className:"mx-2",children:[(0,n.jsx)(u.f,{visible:l}),(null==t?void 0:t.data)&&(0,n.jsx)(edit,{current:null==t?void 0:t.data,refetch:r})]})})]})};var A=Edit;Edit.getLayout=e=>(0,n.jsx)(z.Z,{canSee:[N.K.ADMIN,N.K.CUSTOMER,N.K.MANAGER,N.K.OPERATOR],children:e})},86414:function(e,t,r){"use strict";r.d(t,{o:function(){return m}});var n=r(67294),a=r(12440),l=r(9535),o=r(90987),i=Object.defineProperty,s=Object.defineProperties,d=Object.getOwnPropertyDescriptors,u=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues=(e,t)=>{for(var r in t||(t={}))c.call(t,r)&&__defNormalProp(e,r,t[r]);if(u)for(var r of u(t))p.call(t,r)&&__defNormalProp(e,r,t[r]);return e},__spreadProps=(e,t)=>s(e,d(t));let f={},m=(0,l.d)((e,t)=>{let r=(0,o.w)("TextInput",f,e);return n.createElement(a.M,__spreadProps(__spreadValues({component:"input",ref:t},r),{__staticSelector:"TextInput"}))});m.classes=a.M.classes,m.displayName="@mantine/core/TextInput"},94694:function(e,t,r){"use strict";r.d(t,{g:function(){return w}});var n=r(67294),a=r(87462),l=r(63366),o=n.useLayoutEffect,useLatest=function(e){var t=n.useRef(e);return o(function(){t.current=e}),t},updateRef=function(e,t){if("function"==typeof e){e(t);return}e.current=t},use_composed_ref_esm=function(e,t){var r=(0,n.useRef)();return(0,n.useCallback)(function(n){e.current=n,r.current&&updateRef(r.current,null),r.current=t,t&&updateRef(t,n)},[t])},i={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},forceHiddenStyles$1=function(e){Object.keys(i).forEach(function(t){e.style.setProperty(t,i[t],"important")})},s=null,getHeight=function(e,t){var r=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?r+t.borderSize:r-t.paddingSize},noop=function(){},d=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],u=!!document.documentElement.currentStyle,getSizingData$1=function(e){var t=window.getComputedStyle(e);if(null===t)return null;var r=d.reduce(function(e,r){return e[r]=t[r],e},{}),n=r.boxSizing;if(""===n)return null;u&&"border-box"===n&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var a=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),l=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:a,borderSize:l}};function useListener(e,t,r){var a=useLatest(r);n.useLayoutEffect(function(){var handler=function(e){return a.current(e)};if(e)return e.addEventListener(t,handler),function(){return e.removeEventListener(t,handler)}},[])}var useWindowResizeListener=function(e){useListener(window,"resize",e)},useFontsLoadedListener=function(e){useListener(document.fonts,"loadingdone",e)},c=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],p=n.forwardRef(function(e,t){var r=e.cacheMeasurements,o=e.maxRows,i=e.minRows,d=e.onChange,u=void 0===d?noop:d,p=e.onHeightChange,f=void 0===p?noop:p,m=(0,l.Z)(e,c),v=void 0!==m.value,h=n.useRef(null),b=use_composed_ref_esm(h,t),g=n.useRef(0),x=n.useRef(),resizeTextarea=function(){var e,t,n,a,l,d,u,c,p,m,v,b=h.current,y=r&&x.current?x.current:getSizingData$1(b);if(y){x.current=y;var _=(e=b.value||b.placeholder||"x",void 0===(t=i)&&(t=1),void 0===(n=o)&&(n=1/0),s||((s=document.createElement("textarea")).setAttribute("tabindex","-1"),s.setAttribute("aria-hidden","true"),forceHiddenStyles$1(s)),null===s.parentNode&&document.body.appendChild(s),a=y.paddingSize,l=y.borderSize,u=(d=y.sizingStyle).boxSizing,Object.keys(d).forEach(function(e){s.style[e]=d[e]}),forceHiddenStyles$1(s),s.value=e,c=getHeight(s,y),s.value=e,c=getHeight(s,y),s.value="x",m=(p=s.scrollHeight-a)*t,"border-box"===u&&(m=m+a+l),c=Math.max(m,c),v=p*n,"border-box"===u&&(v=v+a+l),[c=Math.min(v,c),p]),j=_[0],w=_[1];g.current!==j&&(g.current=j,b.style.setProperty("height",j+"px","important"),f(j,{rowHeight:w}))}};return n.useLayoutEffect(resizeTextarea),useWindowResizeListener(resizeTextarea),useFontsLoadedListener(resizeTextarea),n.createElement("textarea",(0,a.Z)({},m,{onChange:function(e){v||resizeTextarea(),u(e)},ref:b}))}),f=r(12440),m=r(9535),v=r(90987),h=Object.defineProperty,b=Object.defineProperties,g=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,r)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues=(e,t)=>{for(var r in t||(t={}))y.call(t,r)&&__defNormalProp(e,r,t[r]);if(x)for(var r of x(t))_.call(t,r)&&__defNormalProp(e,r,t[r]);return e},__spreadProps=(e,t)=>b(e,g(t)),__objRest=(e,t)=>{var r={};for(var n in e)y.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&x)for(var n of x(e))0>t.indexOf(n)&&_.call(e,n)&&(r[n]=e[n]);return r};let j={},w=(0,m.d)((e,t)=>{let r=(0,v.w)("Textarea",j,e),{autosize:a,maxRows:l,minRows:o,__staticSelector:i}=r,s=__objRest(r,["autosize","maxRows","minRows","__staticSelector"]),d=a?{maxRows:l,minRows:o}:{};return n.createElement(f.M,__spreadValues(__spreadProps(__spreadValues({component:a?p:"textarea",ref:t},s),{__staticSelector:i||"Textarea",multiline:!0,"data-no-overflow":a&&void 0===l||void 0}),d))});w.classes=f.M.classes,w.displayName="@mantine/core/Textarea"}},function(e){e.O(0,[2251,5471,3062,9604,6616,330,2929,6148,4480,9774,2888,179],function(){return e(e.s=58310)}),_N_E=e.O()}]);