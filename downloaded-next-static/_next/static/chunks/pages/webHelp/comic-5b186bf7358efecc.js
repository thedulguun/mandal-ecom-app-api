(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2914],{1177:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var a=(0,r(30853).Z)("plus","IconPlus",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]])},79153:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var a=(0,r(30853).Z)("search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]])},4361:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/webHelp/comic",function(){return r(94151)}])},63862:function(e,t,r){"use strict";var a=r(18992);let o="/api/v1";t.Z={getComic:async e=>{var t,r,n,i,s;try{let r=await a.Z.get("".concat(o,"/getComic"),{params:{search:e}});return{success:!0,data:null==r?void 0:null===(t=r.data)||void 0===t?void 0:t.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(r=n.data)||void 0===r?void 0:r.error)||(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(i=s.data)||void 0===i?void 0:i.message)}}},getComment:async()=>{var e,t,r,n,i;try{let t=await a.Z.get("".concat(o,"/getComment"));return{success:!0,data:null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.error)||(null==e?void 0:null===(i=e.response)||void 0===i?void 0:null===(n=i.data)||void 0===n?void 0:n.message)}}},createComic:async(e,t,r)=>{var n,i,s,l,d;try{let i=await a.Z.post("".concat(o,"/createComic"),{title:e,description:t,image:r});return{success:!0,data:null==i?void 0:null===(n=i.data)||void 0===n?void 0:n.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(i=s.data)||void 0===i?void 0:i.error)||(null==e?void 0:null===(d=e.response)||void 0===d?void 0:null===(l=d.data)||void 0===l?void 0:l.message)}}},createComment:async(e,t,r)=>{var n,i,s,l,d;try{let i=await a.Z.post("".concat(o,"/createComment"),{username:e,comment:t,rate:r});return{success:!0,data:null==i?void 0:null===(n=i.data)||void 0===n?void 0:n.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(i=s.data)||void 0===i?void 0:i.error)||(null==e?void 0:null===(d=e.response)||void 0===d?void 0:null===(l=d.data)||void 0===l?void 0:l.message)}}},uploadImage:async e=>{try{let t=new FormData;t.append("image",e);let r=await a.Z.post("".concat(o,"/upload-image"),t);return{success:!0,data:r}}catch(e){var t,r,n,i;return{success:!1,e:(null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.error)||(null==e?void 0:null===(i=e.response)||void 0===i?void 0:null===(n=i.data)||void 0===n?void 0:n.message)}}}}},94151:function(e,t,r){"use strict";r.r(t);var a=r(85893),o=r(63862),n=r(34085),i=r(25130),s=r(95085),l=r(86414),d=r(47181),c=r(42099),u=r(94694),p=r(70140),f=r(56647),v=r(10330),m=r(37113),g=r(79153),h=r(1177),x=r(67294),_=r(88767),b=r(62352),y=r(60946);let Comic=()=>{var e,t;let[r,{open:n,close:i}]=(0,m.q)(!1),[w,j]=(0,x.useState)(),[P,S]=(0,x.useState)(""),O=(0,x.useRef)(null),N=(0,v.c)({initialValues:{title:"",description:"",image:""},validate:{title:e=>(null==e?void 0:e.length)<=0?"Гарчиг оруулна уу!":null,description:e=>(null==e?void 0:e.length)<=0?"Тайлбар оруулна уу!":null,image:e=>(null==e?void 0:e.length)<=0?"Зураг оруулна уу!":null}}),{data:z,isLoading:R,refetch:C}=(0,_.useQuery)(["comic-list",P],()=>o.Z.getComic(P)),L=(0,_.useMutation)(["create-comic"],e=>o.Z.createComic(e.title,e.description,e.image),{onSuccess(e){(null==e?void 0:e.success)===!0?(C(),N.reset(),(0,y.PV)({message:"Комик үүслээ.",status:!0}),i()):(0,y.PV)({message:null==e?void 0:e.e,status:!1})}}),handleSubmit=async e=>{await L.mutateAsync(e)};return(0,a.jsxs)("div",{className:"pr-5",children:[(0,a.jsx)("div",{className:"flex justify-end text-indigo-600",children:(0,a.jsx)("p",{className:"font-bold",children:"Комик харах, засах"})}),(0,a.jsxs)("div",{className:"bg-white rounded-xl w-full 2xl:h-[778px] xl:h-[610px] mt-6 px-8 py-5 flex flex-col justify-between",children:[(0,a.jsx)(s.f,{visible:R}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("p",{className:"font-bold text-indigo-600 mt-1",children:"Комик хайх:"}),(0,a.jsx)(l.o,{className:"w-96 mb-3",placeholder:"Комик нэрээр хайх ...",value:P,onChange:e=>{S(e.target.value)},rightSection:(0,a.jsx)(g.Z,{color:"#6A5ADF",className:"cursor-pointer"})})]}),(0,a.jsx)("div",{className:"grid 2xl:grid-cols-4 xl:grid-cols-4 md:grid-cols-3 gap-10 h-full mb-5 overflow-y-scroll scroll-smooth",children:(null==z?void 0:null===(e=z.data)||void 0===e?void 0:e.length)>0?null==z?void 0:null===(t=z.data)||void 0===t?void 0:t.map(e=>(0,a.jsxs)("div",{className:"w-[194px] h-[346px] bg-[#f4f4f7] rounded-xl border border-[#6a5adf]/40 flex items-center flex-col pt-2",children:[(0,a.jsx)("img",{src:"".concat("https://api.ebuuhia.mn","/images/").concat(null==e?void 0:e.image),alt:"image",className:"w-[170px] h-60 rounded-lg"}),(0,a.jsx)("p",{className:"w-[154px] text-[#6a5adf] text-xl font-semibold mt-2",children:e.title}),(0,a.jsx)("p",{className:"w-[154px] text-[#1a1a1a] text-[13px] font-normal truncate",children:e.description})]},"comic-".concat(null==e?void 0:e.id))):(0,a.jsxs)("div",{className:"flex flex-col items-center col-span-4 justify-center",children:[(0,a.jsx)("img",{src:"/icons/no-data.svg",alt:""}),(0,a.jsx)("p",{className:"text-center text-zinc-900 text-opacity-40 text-[32px]",children:"Илэрц олдсонгүй"})]})}),(0,a.jsx)("div",{className:"flex flex-col justify-end items-center pb-6",children:(0,a.jsx)(d.z,{onClick:n,leftSection:(0,a.jsx)(h.Z,{}),color:"green",px:50,radius:10,children:"Комик нэмэх"})}),(0,a.jsx)(c.u,{opened:r,onClose:i,title:"Комик үүсгэх",children:(0,a.jsxs)("form",{onSubmit:N.onSubmit(e=>{handleSubmit(e)}),children:[(0,a.jsx)(l.o,{label:"Гарчиг",placeholder:"Гарчиг оруулна уу",mb:20,...N.getInputProps("title")}),(0,a.jsx)(u.g,{label:"Тайлбар",placeholder:"Тайлбар оруулна уу",mb:20,...N.getInputProps("description")}),(0,a.jsxs)(f.fh,{onDrop:async e=>{let t=e.map(e=>URL.createObjectURL(e)),[r]=e,a=await o.Z.uploadImage(r);if(a.success){var n;j(t),await N.setFieldValue("image",null===(n=a.data)||void 0===n?void 0:n.data.fileInfo.filename)}},accept:b.d1,maxSize:5242880,children:[(0,a.jsx)(d.z,{onClick:()=>{var e;return null===(e=O.current)||void 0===e?void 0:e.call(O)},style:{pointerEvents:"all"},children:"Зураг сонгох"}),N.errors.image&&(0,a.jsx)("p",{className:"text-red-400 text-[13px]",children:N.errors.image}),N.values.image&&(0,a.jsx)("img",{src:w,alt:"image",height:300,width:300})]}),(0,a.jsx)(p.Z,{justify:"center",children:(0,a.jsx)(d.z,{type:"submit",color:"#6A5ADF",mt:20,children:"Хадгалах"})})]})})]})]})};t.default=Comic,Comic.getLayout=e=>(0,a.jsx)(n.Z,{canSee:[i.K.ADMIN],children:e})},77403:function(e,t,r){"use strict";r.d(t,{k:function(){return useInputProps}});var a=r(90987),o=r(95494),n=Object.defineProperty,i=Object.defineProperties,s=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,r)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues=(e,t)=>{for(var r in t||(t={}))d.call(t,r)&&__defNormalProp(e,r,t[r]);if(l)for(var r of l(t))c.call(t,r)&&__defNormalProp(e,r,t[r]);return e},__spreadProps=(e,t)=>i(e,s(t)),__objRest=(e,t)=>{var r={};for(var a in e)d.call(e,a)&&0>t.indexOf(a)&&(r[a]=e[a]);if(null!=e&&l)for(var a of l(e))0>t.indexOf(a)&&c.call(e,a)&&(r[a]=e[a]);return r};function useInputProps(e,t,r){let n=(0,a.w)(e,t,r),{label:i,description:s,error:l,required:d,classNames:c,styles:u,className:p,unstyled:f,__staticSelector:v,__stylesApiProps:m,errorProps:g,labelProps:h,descriptionProps:x,wrapperProps:_,id:b,size:y,style:w,inputContainer:j,inputWrapperOrder:P,withAsterisk:S,variant:O,vars:N}=n,z=__objRest(n,["label","description","error","required","classNames","styles","className","unstyled","__staticSelector","__stylesApiProps","errorProps","labelProps","descriptionProps","wrapperProps","id","size","style","inputContainer","inputWrapperOrder","withAsterisk","variant","vars"]),{styleProps:R,rest:C}=(0,o.c)(z),L=__spreadValues({label:i,description:s,error:l,required:d,classNames:c,className:p,__staticSelector:v,__stylesApiProps:m||n,errorProps:g,labelProps:h,descriptionProps:x,unstyled:f,styles:u,size:y,style:w,inputContainer:j,inputWrapperOrder:P,withAsterisk:S,variant:O,id:b},_);return __spreadProps(__spreadValues({},C),{classNames:c,styles:u,unstyled:f,wrapperProps:__spreadValues(__spreadValues({},L),R),inputProps:{required:d,classNames:c,styles:u,unstyled:f,size:y,__staticSelector:v,__stylesApiProps:m||n,error:l,variant:O,id:b}})}},12440:function(e,t,r){"use strict";r.d(t,{M:function(){return v}});var a=r(67294),o=r(77403),n=r(19604),i=r(43362),s=Object.defineProperty,l=Object.defineProperties,d=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues=(e,t)=>{for(var r in t||(t={}))u.call(t,r)&&__defNormalProp(e,r,t[r]);if(c)for(var r of c(t))p.call(t,r)&&__defNormalProp(e,r,t[r]);return e},__spreadProps=(e,t)=>l(e,d(t)),__objRest=(e,t)=>{var r={};for(var a in e)u.call(e,a)&&0>t.indexOf(a)&&(r[a]=e[a]);if(null!=e&&c)for(var a of c(e))0>t.indexOf(a)&&p.call(e,a)&&(r[a]=e[a]);return r};let f={__staticSelector:"InputBase",withAria:!0},v=(0,i.b)((e,t)=>{let r=(0,o.k)("InputBase",f,e),{inputProps:i,wrapperProps:s}=r,l=__objRest(r,["inputProps","wrapperProps"]);return a.createElement(n.I.Wrapper,__spreadValues({},s),a.createElement(n.I,__spreadProps(__spreadValues(__spreadValues({},i),l),{ref:t})))});v.classes=__spreadValues(__spreadValues({},n.I.classes),n.I.Wrapper.classes),v.displayName="@mantine/core/InputBase"},94694:function(e,t,r){"use strict";r.d(t,{g:function(){return j}});var a=r(67294),o=r(87462),n=r(63366),i=a.useLayoutEffect,useLatest=function(e){var t=a.useRef(e);return i(function(){t.current=e}),t},updateRef=function(e,t){if("function"==typeof e){e(t);return}e.current=t},use_composed_ref_esm=function(e,t){var r=(0,a.useRef)();return(0,a.useCallback)(function(a){e.current=a,r.current&&updateRef(r.current,null),r.current=t,t&&updateRef(t,a)},[t])},s={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},forceHiddenStyles$1=function(e){Object.keys(s).forEach(function(t){e.style.setProperty(t,s[t],"important")})},l=null,getHeight=function(e,t){var r=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?r+t.borderSize:r-t.paddingSize},noop=function(){},d=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],c=!!document.documentElement.currentStyle,getSizingData$1=function(e){var t=window.getComputedStyle(e);if(null===t)return null;var r=d.reduce(function(e,r){return e[r]=t[r],e},{}),a=r.boxSizing;if(""===a)return null;c&&"border-box"===a&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var o=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),n=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:o,borderSize:n}};function useListener(e,t,r){var o=useLatest(r);a.useLayoutEffect(function(){var handler=function(e){return o.current(e)};if(e)return e.addEventListener(t,handler),function(){return e.removeEventListener(t,handler)}},[])}var useWindowResizeListener=function(e){useListener(window,"resize",e)},useFontsLoadedListener=function(e){useListener(document.fonts,"loadingdone",e)},u=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],p=a.forwardRef(function(e,t){var r=e.cacheMeasurements,i=e.maxRows,s=e.minRows,d=e.onChange,c=void 0===d?noop:d,p=e.onHeightChange,f=void 0===p?noop:p,v=(0,n.Z)(e,u),m=void 0!==v.value,g=a.useRef(null),h=use_composed_ref_esm(g,t),x=a.useRef(0),_=a.useRef(),resizeTextarea=function(){var e,t,a,o,n,d,c,u,p,v,m,h=g.current,b=r&&_.current?_.current:getSizingData$1(h);if(b){_.current=b;var y=(e=h.value||h.placeholder||"x",void 0===(t=s)&&(t=1),void 0===(a=i)&&(a=1/0),l||((l=document.createElement("textarea")).setAttribute("tabindex","-1"),l.setAttribute("aria-hidden","true"),forceHiddenStyles$1(l)),null===l.parentNode&&document.body.appendChild(l),o=b.paddingSize,n=b.borderSize,c=(d=b.sizingStyle).boxSizing,Object.keys(d).forEach(function(e){l.style[e]=d[e]}),forceHiddenStyles$1(l),l.value=e,u=getHeight(l,b),l.value=e,u=getHeight(l,b),l.value="x",v=(p=l.scrollHeight-o)*t,"border-box"===c&&(v=v+o+n),u=Math.max(v,u),m=p*a,"border-box"===c&&(m=m+o+n),[u=Math.min(m,u),p]),w=y[0],j=y[1];x.current!==w&&(x.current=w,h.style.setProperty("height",w+"px","important"),f(w,{rowHeight:j}))}};return a.useLayoutEffect(resizeTextarea),useWindowResizeListener(resizeTextarea),useFontsLoadedListener(resizeTextarea),a.createElement("textarea",(0,o.Z)({},v,{onChange:function(e){m||resizeTextarea(),c(e)},ref:h}))}),f=r(12440),v=r(9535),m=r(90987),g=Object.defineProperty,h=Object.defineProperties,x=Object.getOwnPropertyDescriptors,_=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,r)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues=(e,t)=>{for(var r in t||(t={}))b.call(t,r)&&__defNormalProp(e,r,t[r]);if(_)for(var r of _(t))y.call(t,r)&&__defNormalProp(e,r,t[r]);return e},__spreadProps=(e,t)=>h(e,x(t)),__objRest=(e,t)=>{var r={};for(var a in e)b.call(e,a)&&0>t.indexOf(a)&&(r[a]=e[a]);if(null!=e&&_)for(var a of _(e))0>t.indexOf(a)&&y.call(e,a)&&(r[a]=e[a]);return r};let w={},j=(0,v.d)((e,t)=>{let r=(0,m.w)("Textarea",w,e),{autosize:o,maxRows:n,minRows:i,__staticSelector:s}=r,l=__objRest(r,["autosize","maxRows","minRows","__staticSelector"]),d=o?{maxRows:n,minRows:i}:{};return a.createElement(f.M,__spreadValues(__spreadProps(__spreadValues({component:o?p:"textarea",ref:t},l),{__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":o&&void 0===n||void 0}),d))});j.classes=f.M.classes,j.displayName="@mantine/core/Textarea"},19784:function(e,t,r){"use strict";r.d(t,{h:function(){return useResolvedStylesApi}});var a=r(30202),o=r(98489),n=r(65984);function useResolvedStylesApi({classNames:e,styles:t,props:r,stylesCtx:i}){let s=(0,n.rZ)();return{resolvedClassNames:(0,a.m)({theme:s,classNames:e,props:r,stylesCtx:i||void 0}),resolvedStyles:(0,o.i)({theme:s,styles:t,props:r,stylesCtx:i||void 0})}}}},function(e){e.O(0,[2251,5471,3062,9604,330,3425,2929,9774,2888,179],function(){return e(e.s=4361)}),_N_E=e.O()}]);