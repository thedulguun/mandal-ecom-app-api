"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3489],{46614:function(e,l,a){var s=a(18992),t=a(27484),i=a.n(t);let d="/api/v1";l.Z={find:async(e,l,a,t,n,o,r,c,u,v,m,p,x,h,g)=>{try{var b,j;let y=await s.Z.get("".concat(d,"/delivery"),{params:{startLimit:e,endLimit:l,order:a,sort:t,search:n,value:o,startDate:r?i()(r).format("YYYY-MM-DD 00:00:00"):null,endDate:c?i()(c).format("YYYY-MM-DD 23:59:59"):null,status:u,value1:v,value2:m,order1:p,order2:x,action:h,type:g}});return{success:!0,data:null==y?void 0:null===(b=y.data)||void 0===b?void 0:b.data,pagination:null==y?void 0:null===(j=y.data)||void 0===j?void 0:j.pagination}}catch(e){return{success:!1,e}}},findWithArchive:async(e,l,a,t,n,o,r,c,u,v,m,p,x,h)=>{try{var g,b;let j=await s.Z.get("".concat(d,"/deliveryWithArchive"),{params:{startLimit:e,endLimit:l,order:a,sort:t,search:n,value:o,startDate:r?i()(r).format("YYYY-MM-DD 00:00:00"):null,endDate:c?i()(c).format("YYYY-MM-DD 23:59:59"):null,status:u,value1:v,value2:m,order1:p,order2:x,action:h}});return{success:!0,data:null==j?void 0:null===(g=j.data)||void 0===g?void 0:g.data,pagination:null==j?void 0:null===(b=j.data)||void 0===b?void 0:b.pagination}}catch(e){return{success:!1,e}}},find_items_by_id:async e=>{var l,a,t,i,n;try{let a=await s.Z.get("".concat(d,"/getDelivery_items_by_id"),{params:{id:e}});return{success:!0,data:null==a?void 0:null===(l=a.data)||void 0===l?void 0:l.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.error)||(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(i=n.data)||void 0===i?void 0:i.message)}}},getDelivery_items:async(e,l,a,t,i,n)=>{try{var o,r;let c=await s.Z.get("".concat(d,"/getDelivery_items"),{params:{startLimit:e,endLimit:l,order:a,sort:t,search:i,groupBy:n}});return{success:!0,data:null==c?void 0:null===(o=c.data)||void 0===o?void 0:o.data,pagination:null==c?void 0:null===(r=c.data)||void 0===r?void 0:r.pagination}}catch(e){return{success:!1,e}}},create:async(e,l)=>{var a,t,i,n,o;try{let t=await s.Z.post("".concat(d,"/createDelivery"),{...e,staff:l});return{success:!0,data:null==t?void 0:null===(a=t.data)||void 0===a?void 0:a.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(i=e.response)||void 0===i?void 0:null===(t=i.data)||void 0===t?void 0:t.error)||(null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(n=o.data)||void 0===n?void 0:n.message)}}},edit:async(e,l,a)=>{var t,i,n,o,r;try{let i=await s.Z.patch("".concat(d,"/editDelivery"),{id:e,...l,staff:a});return{success:!0,data:null==i?void 0:null===(t=i.data)||void 0===t?void 0:t.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(i=n.data)||void 0===i?void 0:i.error)||(null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(o=r.data)||void 0===o?void 0:o.message)}}},editReceivedMoney:async(e,l,a)=>{var t,i,n,o,r;try{let i=await s.Z.patch("".concat(d,"/editReceivedMoney"),{id:e,money:l,staff:a});return{success:!0,data:null==i?void 0:null===(t=i.data)||void 0===t?void 0:t.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(i=n.data)||void 0===i?void 0:i.error)||(null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(o=r.data)||void 0===o?void 0:o.message)}}},editDesc:async(e,l,a)=>{var t,i,n,o,r;try{let i=await s.Z.patch("".concat(d,"/editDesc"),{id:e,desc:l,field:a});return{success:!0,data:null==i?void 0:null===(t=i.data)||void 0===t?void 0:t.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(i=n.data)||void 0===i?void 0:i.error)||(null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(o=r.data)||void 0===o?void 0:o.message)}}},verify:async(e,l,a)=>{var t,i,n,o,r;try{let i=await s.Z.patch("".concat(d,"/verify"),{id:e,verify:l,staff:a});return{success:!0,data:null==i?void 0:null===(t=i.data)||void 0===t?void 0:t.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(i=n.data)||void 0===i?void 0:i.error)||(null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(o=r.data)||void 0===o?void 0:o.message)}}},getDeliveryrCustomer:async(e,l,a,t,n,o,r,c,u,v,m,p)=>{try{var x,h;let g=await s.Z.get("".concat(d,"/getDeliveryCustomer"),{params:{startLimit:e,endLimit:l,order:a,sort:t,search:n,value:o,startDate:r?i()(r).format("YYYY-MM-DD 00:00:00"):null,endDate:c?i()(c).format("YYYY-MM-DD 23:59:59"):null,status:u,id:v,action:m,type:p}});return{success:!0,data:null==g?void 0:null===(x=g.data)||void 0===x?void 0:x.data,pagination:null==g?void 0:null===(h=g.data)||void 0===h?void 0:h.pagination}}catch(e){return{success:!1,e}}},importExcel:async(e,l)=>{var a,t,i,n,o,r;try{let i=new FormData;i.append("excelFile",e);let n=await s.Z.post("".concat(d,"/uploadExcelFile"),i,{params:{staff:l}});return{status:null==n?void 0:null===(a=n.data)||void 0===a?void 0:a.status,message:null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.message}}catch(e){return{status:null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(i=n.data)||void 0===i?void 0:i.status,message:null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(o=r.data)||void 0===o?void 0:o.message}}},bulkPrint:async e=>{try{var l,a;let t=await s.Z.post("".concat(d,"/changeStatusQR"),{params:{id:e}});return{success:!0,data:null==t?void 0:null===(l=t.data)||void 0===l?void 0:l.data,pagination:null==t?void 0:null===(a=t.data)||void 0===a?void 0:a.pagination}}catch(e){return{success:!1,e}}},checkDeliveryList:async(e,l,a)=>{try{var t,i;let n=await s.Z.get("".concat(d,"/checkDelivery"),{params:{startLimit:e,endLimit:l,search:a}});return{success:!0,data:null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.data,pagination:null==n?void 0:null===(i=n.data)||void 0===i?void 0:i.pagination}}catch(e){return{success:!1,e}}}}},11336:function(e,l,a){var s=a(18992),t=a(27484),i=a.n(t);let d="/api/v1";l.Z={find:async(e,l,a,t,n,o,r,c)=>{try{var u,v;let m=await s.Z.get("".concat(d,"/items"),{params:{startLimit:e,endLimit:l,order:a,sort:t,search:n,value:o,startDate:r?i()(r).format("YYYY-MM-DD 00:00:00"):null,endDate:c?i()(c).format("YYYY-MM-DD 23:59:59"):null}});return{success:!0,data:null==m?void 0:null===(u=m.data)||void 0===u?void 0:u.data,pagination:null==m?void 0:null===(v=m.data)||void 0===v?void 0:v.pagination}}catch(e){return{success:!1,e}}},returnedItem:async(e,l,a,t,n,o,r,c)=>{try{var u,v;let m=await s.Z.get("".concat(d,"/getReturnedItem"),{params:{startLimit:e,endLimit:l,order:a,sort:t,value:o,search:n,startDate:r?i()(r).format("YYYY-MM-DD 00:00:00"):null,endDate:c?i()(c).format("YYYY-MM-DD 23:59:59"):null}});return{success:!0,data:null==m?void 0:null===(u=m.data)||void 0===u?void 0:u.data,pagination:null==m?void 0:null===(v=m.data)||void 0===v?void 0:v.pagination}}catch(e){return{success:!1,e}}},getPrepareItem:async(e,l,a,t,i)=>{var n,o,r,c,u,v;try{let r=await s.Z.get("".concat(d,"/prepareItem"),{params:{startLimit:e,endLimit:l,search:a,order:t,sort:i}});return{success:!0,data:null==r?void 0:null===(n=r.data)||void 0===n?void 0:n.data,pagination:null==r?void 0:null===(o=r.data)||void 0===o?void 0:o.pagination}}catch(e){return{success:!1,e:(null==e?void 0:null===(c=e.response)||void 0===c?void 0:null===(r=c.data)||void 0===r?void 0:r.error)||(null==e?void 0:null===(v=e.response)||void 0===v?void 0:null===(u=v.data)||void 0===u?void 0:u.message)}}},getReadyItem:async(e,l,a,t,i)=>{var n,o,r,c,u,v;try{let r=await s.Z.get("".concat(d,"/readyItem"),{params:{startLimit:e,endLimit:l,search:a,order:t,sort:i}});return{success:!0,data:null==r?void 0:null===(n=r.data)||void 0===n?void 0:n.data,pagination:null==r?void 0:null===(o=r.data)||void 0===o?void 0:o.pagination}}catch(e){return{success:!1,e:(null==e?void 0:null===(c=e.response)||void 0===c?void 0:null===(r=c.data)||void 0===r?void 0:r.error)||(null==e?void 0:null===(v=e.response)||void 0===v?void 0:null===(u=v.data)||void 0===u?void 0:u.message)}}},create:async(e,l)=>{var a,t,i,n,o;try{let t=await s.Z.post("".concat(d,"/createItem"),{...e,staff:l});return{success:!0,data:null==t?void 0:null===(a=t.data)||void 0===a?void 0:a.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(i=e.response)||void 0===i?void 0:null===(t=i.data)||void 0===t?void 0:t.error)||(null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(n=o.data)||void 0===n?void 0:n.message)}}},editQuantity:async(e,l)=>{var a,t,i,n,o;try{let t=await s.Z.patch("".concat(d,"/editItemQuantity"),{id:e,quantity:l});return{success:!0,data:null==t?void 0:null===(a=t.data)||void 0===a?void 0:a.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(i=e.response)||void 0===i?void 0:null===(t=i.data)||void 0===t?void 0:t.error)||(null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(n=o.data)||void 0===n?void 0:n.message)}}},editStart:async(e,l)=>{var a,t,i,n,o;try{let t=await s.Z.patch("".concat(d,"/editStart"),{id:e,start:l});return{success:!0,data:null==t?void 0:null===(a=t.data)||void 0===a?void 0:a.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(i=e.response)||void 0===i?void 0:null===(t=i.data)||void 0===t?void 0:t.error)||(null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(n=o.data)||void 0===n?void 0:n.message)}}},editEnd:async(e,l)=>{var a,t,i,n,o;try{let t=await s.Z.patch("".concat(d,"/editEnd"),{id:e,end:l});return{success:!0,data:null==t?void 0:null===(a=t.data)||void 0===a?void 0:a.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(i=e.response)||void 0===i?void 0:null===(t=i.data)||void 0===t?void 0:t.error)||(null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(n=o.data)||void 0===n?void 0:n.message)}}},getItemByWareId:async e=>{var l,a,t,i,n;try{if(e){let a=await s.Z.get("".concat(d,"/itemsByWareId"),{params:{ware_id:e}});return{success:!0,data:null==a?void 0:null===(l=a.data)||void 0===l?void 0:l.data}}}catch(e){return{success:!1,e:(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.error)||(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(i=n.data)||void 0===i?void 0:i.message)}}},itemById:async e=>{var l,a,t,i,n;try{let a=await s.Z.get("".concat(d,"/itemsById"),{params:{id:e}});return{success:!0,data:null==a?void 0:null===(l=a.data)||void 0===l?void 0:l.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.error)||(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(i=n.data)||void 0===i?void 0:i.message)}}},addItem:async(e,l)=>{var a,t,i,n,o;try{let t=await s.Z.patch("".concat(d,"/addItem"),{...e,worker:l});return{success:!0,data:null==t?void 0:null===(a=t.data)||void 0===a?void 0:a.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(i=e.response)||void 0===i?void 0:null===(t=i.data)||void 0===t?void 0:t.error)||(null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(n=o.data)||void 0===n?void 0:n.message)}}},bundleItem:async e=>{var l,a,t,i,n;try{let a=await s.Z.patch("".concat(d,"/bundleItem"),{id:e});return{success:!0,data:null==a?void 0:null===(l=a.data)||void 0===l?void 0:l.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.error)||(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(i=n.data)||void 0===i?void 0:i.message)}}},customer:async(e,l,a,t,n,o,r,c,u)=>{try{var v,m;let p=await s.Z.get("".concat(d,"/getItemCustomer"),{params:{startLimit:e,endLimit:l,order:a,sort:t,search:n,value:o,id:r,startDate:c?i()(c).format("YYYY-MM-DD 00:00:00"):null,endDate:u?i()(u).format("YYYY-MM-DD 23:59:59"):null}});return{success:!0,data:null==p?void 0:null===(v=p.data)||void 0===v?void 0:v.data,pagination:null==p?void 0:null===(m=p.data)||void 0===m?void 0:m.pagination}}catch(e){return{success:!1,e}}}}},48011:function(e,l,a){var s=a(18992);let t="/api/v1";l.Z={find:async(e,l,a)=>{try{var i;let d=await s.Z.get("".concat(t,"/wares"),{params:{order:e,sort:l,search:a}});return{success:!0,data:null==d?void 0:null===(i=d.data)||void 0===i?void 0:i.data}}catch(e){return{success:!1,e}}},create:async(e,l,a)=>{var i,d,n,o,r;try{let d=await s.Z.post("".concat(t,"/createWare"),{user_id:e,name:l,staff:a});return{success:!0,data:null==d?void 0:null===(i=d.data)||void 0===i?void 0:i.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(d=n.data)||void 0===d?void 0:d.error)||(null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(o=r.data)||void 0===o?void 0:o.message)}}},getWareByUserId:async e=>{var l,a,i,d,n;try{if(e){let a=await s.Z.get("".concat(t,"/wareByUserId"),{params:{user_id:e}});return{success:!0,data:null==a?void 0:null===(l=a.data)||void 0===l?void 0:l.data}}}catch(e){return{success:!1,e:(null==e?void 0:null===(i=e.response)||void 0===i?void 0:null===(a=i.data)||void 0===a?void 0:a.error)||(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(d=n.data)||void 0===d?void 0:d.message)}}},edit:async(e,l,a)=>{var i,d,n,o,r;try{let d=await s.Z.patch("".concat(t,"/editWare"),{id:e,name:l,staff:a});return{success:!0,data:null==d?void 0:null===(i=d.data)||void 0===i?void 0:i.data}}catch(e){return{success:!1,e:(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(d=n.data)||void 0===d?void 0:d.error)||(null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(o=r.data)||void 0===o?void 0:o.message)}}},customer:async(e,l,a,i)=>{try{var d;let n=await s.Z.get("".concat(t,"/getWareCustomer"),{params:{order:e,sort:l,search:a,id:i}});return{success:!0,data:null==n?void 0:null===(d=n.data)||void 0===d?void 0:d.data}}catch(e){return{success:!1,e}}}}},63489:function(e,l,a){a.r(l);var s=a(85893),t=a(67294),i=a(10330),d=a(95085),n=a(99575),o=a(36616),r=a(86414),c=a(95601),u=a(94694),v=a(90589),m=a(47181),p=a(70140),x=a(8861),h=a(81421),g=a(89081),b=a(2891),j=a(67751),y=a(74075),f=a(9494),w=a(77390),N=a(43681),D=a(88767),F=a(26148),S=a(60946),Z=a(46614),A=a(11163),Y=a(48011),_=a(11336),I=a(25832),z=a(74886);l.default=()=>{var e;let[l,a]=(0,t.useState)(0),[P,M]=(0,t.useState)(),[V,k]=(0,t.useState)(!1),[C,E]=(0,t.useState)(!1),[B,W]=(0,t.useState)(!0),[Q,q]=(0,t.useState)(!1),[R,T]=(0,t.useState)(),[L,U]=(0,t.useState)(null),[X,K]=(0,t.useState)(null),[G,H]=(0,t.useState)([]),[J,O]=(0,t.useState)([]),[$,ee]=(0,t.useState)(null),[el,ea]=(0,t.useState)(0),[es,et]=(0,t.useState)(0),[ei,ed]=(0,t.useState)(0),[en,eo]=(0,t.useState)(!1),er=(0,A.useRouter)(),{user:ec}=(0,N.a)();(0,t.useEffect)(()=>{Q&&(ev.setFieldValue("city",null),ev.setFieldValue("district",null),ev.setFieldValue("committee",null),ev.setFieldValue("town",""),ev.setFieldValue("street",""),ev.setFieldValue("toot",""),ev.setFieldValue("addition",""),ev.setFieldValue("operator",1))},[Q]),(0,t.useEffect)(()=>{V&&(ev.setFieldValue("item_name",""),ev.setFieldValue("total_price",null),ev.setFieldValue("quantity",null),ev.setFieldValue("size",""),ev.setFieldValue("weight",""))},[V]),(0,t.useEffect)(()=>{(null==ec?void 0:ec.role)==="customer"&&(T(null==ec?void 0:ec.user_id),ev.setFieldValue("user_id",null==ec?void 0:ec.user_id))},[ec]),(0,t.useEffect)(()=>{ev.setFieldValue("items",J)},[G]),(0,t.useEffect)(()=>{U(""),H([])},[R]),(0,t.useEffect)(()=>{el&&K(null)},[L]);let eu=[{img:"/warning/1.svg",text:"Хайлна"},{img:"/warning/2.svg",text:"Хөлдөнө"},{img:"/warning/3.svg",text:"Сэгсэрч болохгүй"},{img:"/warning/4.svg",text:"Хагарна"}],ev=(0,i.c)({initialValues:{total_price:null,user_id:null,cus_name:"",cus_phone:null,cus_phone1:null,city:null,district:null,committee:null,town:"",street:"",toot:"",addition:"",deli_desc:"",item_name:"",item_type:"",quantity:null,size:"",weight:"",type:"Энгийн",items:[],send_message:!1}});(0,t.useEffect)(()=>{ev.values.city&&(ev.setFieldValue("district",null),ev.setFieldValue("committee",null))},[ev.values.city]),(0,t.useEffect)(()=>{ev.values.district&&ev.setFieldValue("committee",null)},[ev.values.district]);let{data:em,isLoading:ep}=(0,D.useQuery)(["user-list-delivery"],()=>F.Z.find(),{enabled:(null==ec?void 0:ec.role)!="customer",staleTime:6e5,cacheTime:12e5}),{data:ex}=(0,D.useQuery)(["khoroo-list",ev.values.district],()=>z.Z.find(ev.values.district),{enabled:!!ev.values.district,staleTime:6e5,cacheTime:12e5}),{data:eh}=(0,D.useQuery)(["user-by-id",R],()=>F.Z.getUserById(R),{enabled:!!R,staleTime:6e5,cacheTime:12e5}),{data:eg,refetch:eb}=(0,D.useQuery)(["ware-list",R],()=>Y.Z.getWareByUserId(R),{enabled:!!R}),{data:ej}=(0,D.useQuery)(["item-list",L],()=>_.Z.getItemByWareId(L),{enabled:!!L}),{data:ey,isLoading:ef}=(0,D.useQuery)(["item-list-all",G],()=>_.Z.itemById(G),{enabled:G.length>0});(0,t.useEffect)(()=>{var e,l;let a=(null==ey?void 0:null===(e=ey.data.find(e=>(null==e?void 0:e.id)==X))||void 0===e?void 0:e.price)||0;ea(a);let s=(null===(l=J.find(e=>(null==e?void 0:e.id)==X))||void 0===l?void 0:l.start)||0;et(s)},[ey,X]),(0,t.useEffect)(()=>{let e=parseFloat(el),l=parseFloat(es),a=Math.floor(e*l);!1===en?ed(e=>e+a):eo(!1)},[el,es]);let ew=(0,D.useMutation)(["create-delivery"],e=>Z.Z.create(e,null==ec?void 0:ec.last_name),{onSuccess(e){(null==e?void 0:e.success)===!0?(er.push("/delivery"),(0,S.PV)({message:"Хүргэлт үүслээ.",status:!0})):(0,S.PV)({message:null==e?void 0:e.e,status:!1})}}),handleSubmit=async(e,l)=>{l.preventDefault(),l.stopPropagation(),await (null==ew?void 0:ew.mutateAsync(e))},addItem=(e,l)=>{G.includes(e)?(0,S.PV)({message:"Сонгогдсон бараа байна!",status:!1}):(H(l=>[...l,e]),O(a=>[...a,{id:e,start:l||0}]),U(null),eb(),ee(""))};return(0,s.jsxs)("div",{className:"grid gap-4 lg:grid-cols-3 grid-cols-1 w-full min-h-screen",children:[(0,s.jsxs)("div",{className:"col-span-2 bg-white rounded-xl p-4",children:[(0,s.jsx)("h1",{className:"flex justify-center text-[#6A5ADF] font-bold text-[20px]",children:"Хүргэлт үүсгэх"}),(0,s.jsx)(d.f,{visible:null==ew?void 0:ew.isLoading}),(0,s.jsxs)("form",{onSubmit:ev.onSubmit((e,l)=>{handleSubmit(e,l),E(!1)}),children:[(0,s.jsxs)(n.v,{active:l,onStepClick:a,className:"mt-12 mx-4",size:"sm",color:"#6A5ADF",allowNextStepsSelect:!1,children:[(0,s.jsxs)(n.v.Step,{label:"Мэдээлэл",children:[(null==ec?void 0:ec.role)!=="customer"&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.P,{value:R,label:"Харилцагч",leftSection:(0,s.jsx)(x.Z,{size:"1.5rem",color:"#6A5ADF"}),placeholder:"Харилцагч сонгох",data:((null==em?void 0:em.data)||[]).filter(e=>(null==e?void 0:e.role)==="customer"&&(null==e?void 0:e.active)==1).map(e=>({label:(null==e?void 0:e.shop_name)||"",value:null==e?void 0:e.user_id.toString()})),searchable:!0,clearable:!0,onChange:e=>{T(e),ev.setFieldValue("user_id",e)},disabled:(null==ec?void 0:ec.role)==="customer",mb:20}),(0,s.jsx)(d.f,{visible:ep})]}),(0,s.jsx)(r.o,{label:"Хүлээн авагчийн нэр",leftSection:(0,s.jsx)(x.Z,{size:"1.5rem",color:"#6A5ADF"}),placeholder:"Хүлээн авагчийн нэр",...ev.getInputProps("cus_name"),mb:20}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(r.o,{label:"Холбогдох дугаар",className:"w-1/2",leftSection:(0,s.jsx)(h.Z,{size:"1.5rem",color:"#6A5ADF"}),placeholder:"Заавал бөглөх",...ev.getInputProps("cus_phone"),type:"number",mb:20}),(0,s.jsx)(r.o,{label:" ",className:"w-1/2",leftSection:(0,s.jsx)(g.Z,{size:"1.5rem",color:"#6A5ADF"}),placeholder:"Яаралтай үед холбогдох дугаар",...ev.getInputProps("cus_phone1"),type:"number",mb:20})]})]}),(0,s.jsxs)(n.v.Step,{label:"Хаяг",children:[(0,s.jsxs)("p",{className:"text-[#FB4242] text-[16px] w-full my-4",children:["Та хаягийн мэдээллээ үнэн зөв бөглөөгүй тохиолдолд таны хүргэлт хүргэгдэхгүй болхийг анхаарна уу!"," ",(0,s.jsx)("span",{className:"italic font-bold",children:"Хаяг дутуугаас үүдэх хариуцлагыг хүлээхгүй болно!"})]}),(0,s.jsx)(c.X,{label:"Операторын үйлчилгээ (₮1 000)",color:"#6A5ADF",my:30,checked:Q,onChange:e=>q(e.target.checked)}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(o.P,{data:(I.n||[]).map(e=>({label:(null==e?void 0:e.value)||"",value:null==e?void 0:e.value.toString()})),clearable:!0,label:"Хот/аймаг (Заавал биш)",className:"w-1/2",leftSection:(0,s.jsx)(b.Z,{size:"1.5rem",color:"#6A5ADF"}),placeholder:"Хот/аймаг сонгоно уу",...ev.getInputProps("city"),mb:20,disabled:Q}),(0,s.jsx)(o.P,{data:(I.g||[]).filter(e=>e.value===ev.values.city).map(e=>({label:(null==e?void 0:e.label)||"",value:null==e?void 0:e.label.toString()})),clearable:!0,label:"Сум/дүүрэг (Заавал биш)",className:"w-1/2",leftSection:(0,s.jsx)(b.Z,{size:"1.5rem",color:"#6A5ADF"}),placeholder:"Сум/дүүрэг сонгоно уу",...ev.getInputProps("district"),mb:20,disabled:Q})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(o.P,{data:((null==ex?void 0:ex.data)||[]).map(e=>({label:(null==e?void 0:e.name)||"",value:null==e?void 0:e.name.toString()})),label:"Баг/хороо (Заавал биш)",searchable:!0,clearable:!0,nothingFoundMessage:"Сум/дүүрэг сонгоно уу",className:"w-1/2",leftSection:(0,s.jsx)(b.Z,{size:"1.5rem",color:"#6A5ADF"}),placeholder:"Баг/хороо cонгоно уу",...ev.getInputProps("committee"),mb:20,disabled:Q}),(0,s.jsx)(r.o,{label:"Хотхон-Байр/барилга (Заавал биш)",className:"w-1/2",leftSection:(0,s.jsx)(b.Z,{size:"1.5rem",color:"#6A5ADF"}),placeholder:"Хотхон-Байр/барилга оруулна уу",...ev.getInputProps("town"),mb:20,disabled:Q})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(r.o,{label:"Орц/гудамж (Заавал биш)",className:"w-1/2",leftSection:(0,s.jsx)(b.Z,{size:"1.5rem",color:"#6A5ADF"}),placeholder:"Орц/гудамж оруулна уу",...ev.getInputProps("street"),mb:20,disabled:Q}),(0,s.jsx)(r.o,{label:"Давхар-тоот (Заавал биш)",className:"w-1/2",leftSection:(0,s.jsx)(b.Z,{size:"1.5rem",color:"#6A5ADF"}),placeholder:"Давхар-тоот оруулна уу",...ev.getInputProps("toot"),mb:20,disabled:Q})]}),(0,s.jsx)(u.g,{label:"Товч хаяг, мэдээлэл (Заавал)",placeholder:"Алтай хотхон байр-99, орц-99, тоот-99 орцны код нь 1234 гэх мэт ...",...ev.getInputProps("addition"),mb:20,disabled:Q})]}),(0,s.jsxs)(n.v.Step,{label:"Бараа",children:[(0,s.jsx)(c.X,{label:"Барааны агуулах",my:20,color:"#6A5ADF",onChange:()=>k(e=>!e),checked:V}),V?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid sm:grid-cols-4 grid-cols-2 gap-4 items-center",children:[(0,s.jsx)(o.P,{label:"Агуулах сонгох",className:"".concat(L?"col-span-1":"col-span-2"),leftSection:(0,s.jsx)(j.Z,{size:"1.5rem",color:"#6A5ADF"}),placeholder:"Агуулах сонгох",nothingFoundMessage:"Агуулах байхгүй байна. Агуулах үүсгэнэ үү!",data:((null==eg?void 0:eg.data)||[]).map(e=>({value:null==e?void 0:e.id.toString(),label:(null==e?void 0:e.name)||""})),onChange:e=>{U(e)},searchable:!0,clearable:!0,mb:20,value:L}),L&&(0,s.jsx)(o.P,{label:"Бараа сонгох",leftSection:(0,s.jsx)(j.Z,{size:"1.5rem",color:"#6A5ADF"}),placeholder:"Заавал бөглөх",data:((null==ej?void 0:ej.data)||[]).map(e=>({value:null==e?void 0:e.id.toString(),label:"".concat(null==e?void 0:e.name.trim(),": ").concat((null==e?void 0:e.quantity)||0)||""})),onChange:e=>{G.includes(e)||K(e)},nothingFoundMessage:"Бараа олдсонгүй. Бараа үүсгэнэ үү!",searchable:!0,clearable:!0,mb:20,value:X}),(0,s.jsx)("div",{children:(0,s.jsx)(v.Y,{label:"Тоо ширхэг",leftSection:(0,s.jsx)(j.Z,{size:"1.5rem",color:"#6A5ADF"}),placeholder:"Заавал бөглөх",onChange:e=>{let l=null!=e?e:0;ee(0>Number(l)?0:Number(l))},onKeyDown:e=>{("-"===e.key||"e"===e.key||"E"===e.key)&&e.preventDefault()},min:1,thousandSeparator:",",value:$,mb:20})}),(0,s.jsx)(m.z,{color:"#6A5ADF",radius:9,leftSection:(0,s.jsx)("img",{src:"/icons/shopping.svg",alt:"shopping"}),disabled:null===X||null===$,className:"w-1/4",onClick:()=>addItem(X,$),children:"Нэмэх"})]}),(0,s.jsxs)("div",{className:"mb-[20px]",children:[(0,s.jsx)("p",{className:"text-sm mb-1 font-semibold",children:"Захиалгын жагсаалт"}),(0,s.jsxs)("div",{className:"relative border-2 rounded-xl w-full h-40 overflow-y-scroll",children:[(0,s.jsx)(d.f,{visible:ef}),(null==J?void 0:J.length)>0?(J||[]).map((e,l)=>{var a,t,i,d,n;let o=null==ey?void 0:null===(a=ey.data.find(l=>l.id==e.id))||void 0===a?void 0:a.id;return(0,s.jsxs)("div",{className:"m-4 space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsxs)("p",{className:"w-1/5 ",children:[(0,s.jsx)("p",{className:"font-semibold",children:"Барааны нэр:"})," ",(null==ey?void 0:null===(t=ey.data.find((l,a)=>e.id==(null==l?void 0:l.id)))||void 0===t?void 0:t.name)||0]}),(0,s.jsxs)("div",{className:"flex items-center justify-end space-x-2 w-2/5",children:[(0,s.jsx)("p",{className:"font-semibold",children:"Нэгж үнэ:"}),(0,s.jsxs)("p",{children:["₮",(0,S.uf)((null==ey?void 0:null===(i=ey.data.find((l,a)=>e.id==(null==l?void 0:l.id)))||void 0===i?void 0:i.price)||0)]})]}),(0,s.jsx)("div",{className:"flex justify-end items-end w-1/5",children:(0,s.jsx)("div",{className:"flex items-center h-1/5 w-auto rounded-lg px-2",children:(0,s.jsx)("div",{className:"mx-2",children:(0,s.jsxs)("p",{children:["Ширхэг:"," ",null==ey?void 0:ey.data.map((l,a)=>(0,s.jsx)(s.Fragment,{children:e.id==l.id&&(null==e?void 0:e.start)}))]})})})}),(0,s.jsxs)("p",{className:"flex justify-end items-end rounded w-2/5 h-full",children:[(0,s.jsx)("p",{className:"font-semibold",children:"Нийт үнэ:"}),(0,s.jsxs)("div",{className:"bg-indigo-100 rounded px-1",children:["₮",(0,S.uf)(Math.floor(Number((null==ey?void 0:null===(d=ey.data.find((l,a)=>e.id==(null==l?void 0:l.id)))||void 0===d?void 0:d.price)||0)*(null==J?void 0:null===(n=J.find(e=>e.id==o))||void 0===n?void 0:n.start)))]})]})]}),(0,s.jsx)("div",{className:"border-b border-indigo-600 border-opacity-40"})]},"order-".concat(l))}):(0,s.jsx)("div",{className:"flex justify-center items-center h-full text-indigo-600 font-bold",children:"Бараа нэмнэ үү!"})]}),(null==J?void 0:J.length)>0&&(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)(m.z,{className:" mt-2",leftSection:(0,s.jsx)(y.Z,{}),size:"xs",color:"red",onClick:()=>{O([]),H([]),ed(0)},children:"Бараа хасах"})})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid sm:grid-cols-3 grid-cols-1 gap-4",children:[(0,s.jsx)(r.o,{label:"Барааны нэр",placeholder:"Сонголтоор",...ev.getInputProps("item_name"),mb:20}),(0,s.jsx)(v.Y,{label:"Хэрэглэгчээс авах дүн",leftSection:(0,s.jsx)(f.Z,{size:"1.5rem",color:"#6A5ADF"}),required:!0,thousandSeparator:",",placeholder:"Заавал бөглөх",...ev.getInputProps("total_price"),mb:20}),(0,s.jsx)(v.Y,{label:"Тоо ширхэг",thousandSeparator:",",leftSection:(0,s.jsx)(j.Z,{size:"1.5rem",color:"#6A5ADF"}),placeholder:"Тоо ширхэг оруулна уу",min:0,...ev.getInputProps("quantity"),mb:20})]}),(0,s.jsxs)("div",{className:"grid sm:grid-cols-3 grid-cols-1 gap-4",children:[(0,s.jsx)(o.P,{label:"Овор",leftSection:(0,s.jsx)(j.Z,{size:"1.5rem",color:"#6A5ADF"}),placeholder:"30x30x30",...ev.getInputProps("size"),data:["30x30x30","60x60x60"].map(e=>({value:e,label:e})),mb:20,clearable:!0}),(0,s.jsx)(r.o,{label:"Жин (Кг)",leftSection:(0,s.jsx)(j.Z,{size:"1.5rem",color:"#6A5ADF"}),placeholder:"Жин (Кг)",...ev.getInputProps("weight"),mb:20}),(0,s.jsx)(o.P,{label:"Хүргэлтийн төрөл",leftSection:(0,s.jsx)(w.Z,{size:"1.5rem",color:"#6A5ADF"}),placeholder:"Заавал бөглөх",...ev.getInputProps("type"),data:[{value:"Энгийн",label:"Энгийн"},{value:"Нэмэлт",label:"Нэмэлт (5000₮)"}].map(e=>({value:e.value,label:e.label})),value:ev.values.type,mb:20,clearable:!0})]})]}),!0===V&&(0,s.jsxs)("div",{className:"sm:flex justify-between items-center",children:[(0,s.jsx)(v.Y,{label:"Үнэ",placeholder:"Үнэ оруулна уу!",thousandSeparator:",",className:"sm:w-1/3 w-full",required:!0,onChange:e=>{let l=parseFloat(e);ed(l),ev.setFieldValue("total_price",e)},value:ei,mb:20}),(0,s.jsx)(o.P,{label:"Хүргэлтийн төрөл",leftSection:(0,s.jsx)(w.Z,{size:"1.5rem",color:"#6A5ADF"}),placeholder:"Заавал бөглөх",...ev.getInputProps("type"),className:"sm:w-1/3 w-full",data:[{value:"Энгийн",label:"Энгийн"},{value:"Нэмэлт",label:"Нэмэлт (5000₮)"}].map(e=>({value:e.value,label:e.label})),value:ev.values.type,mb:20,clearable:!0})]}),(0,s.jsx)(u.g,{label:"Барааны нэмэлт тайлбар",placeholder:"Шингэн, хэлбэрээ алдахаар зөөлөн гадаргуутай гэх мэт ...",...ev.getInputProps("deli_desc")}),(0,s.jsx)("div",{className:"grid sm:grid-cols-4 grid-cols-2 gap-4 mt-6",children:null==eu?void 0:eu.map((e,l)=>(0,s.jsxs)("div",{onClick:()=>{M(e),ev.setFieldValue("item_type",null==e?void 0:e.text)},className:"h-[65px] border border-[#6A5ADF] rounded-md flex items-center justify-center cursor-pointer ".concat((null==e?void 0:e.text)===(null==P?void 0:P.text)?"bg-[#6A5ADF]":""),children:[(0,s.jsx)("img",{src:null==e?void 0:e.img,alt:"1"}),(0,s.jsx)("p",{className:"text-[#6A5ADF] font-bold text-xs ".concat((null==e?void 0:e.text)===(null==P?void 0:P.text)?"text-white":""),children:null==e?void 0:e.text})]},"createDelivery-".concat(l)))})]})]}),(0,s.jsxs)(p.Z,{justify:"space-between",className:"mx-4 mt-4",children:[(0,s.jsx)(m.z,{disabled:0==l,variant:"default",radius:9,onClick:()=>{1!==l&&W(!0),a(e=>e>0?e-1:e)},leftSection:(0,s.jsx)("img",{src:"/icons/arrow-left.svg",alt:"arrowLeft"}),children:"Өмнөх"}),2==l?(0,s.jsx)(m.z,{radius:9,color:"#6A5ADF",type:C?"submit":"button",onClick:()=>{E(!0)},loading:null==ew?void 0:ew.isLoading,rightSection:(0,s.jsx)("img",{src:"/icons/check.svg",alt:"check"}),children:"Хадгалах"}):(0,s.jsx)(m.z,{onClick:()=>{if(null===ev.values.user_id){(0,S.PV)({message:"Харилцагч сонгоно уу",status:!1});return}if((null===ev.values.cus_phone||""===ev.values.cus_phone)&&0===l){ev.setFieldError("cus_phone"," Хүлээн авагчийн дугаар оруулна уу");return}if(""==ev.values.addition.trim()&&1===l&&!1===Q){ev.setFieldError("addition","Хүргэлтийн хаягаа оруулна уу!");return}1===l&&W(!1),a(e=>e<3?e+1:e)},radius:9,color:"#6A5ADF",rightSection:(0,s.jsx)("img",{src:"/icons/arrow-right.svg",alt:"arrowRight"}),children:"Үргэжлүүлэх"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-white rounded-xl p-5",children:[(0,s.jsxs)("div",{className:"h-11 text-xs w-full font-semibold text-indigo-600 mb-6 bg-gray-100 rounded-xl flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-1/2 h-full cursor-pointer ".concat(!0===B?"text-white font-bold bg-indigo-600 rounded-xl":""),onClick:()=>W(!0),children:"Хүргэлтийн мэдээлэл"}),(0,s.jsx)("div",{className:"w-1/2 flex items-center justify-center h-full cursor-pointer ".concat(!1===B?"text-white font-bold bg-indigo-600 rounded-xl":""),onClick:()=>W(!1),children:"Барааны мэдээлэл"})]}),B?(0,s.jsxs)("div",{className:"text-sm space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"font-bold",children:"Харилцагч:"}),(0,s.jsx)("p",{children:(null==eh?void 0:null===(e=eh.data)||void 0===e?void 0:e.shop_name)||"-"}),(0,s.jsx)("div",{className:"border-b border-zinc-900 border-opacity-40"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"font-bold",children:"Хүлээн авагчийн нэр:"}),(0,s.jsx)("p",{children:ev.values.cus_name||"-"}),(0,s.jsx)("div",{className:"border-b border-zinc-900 border-opacity-40"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"font-bold",children:"Холбогдох дугаар:"}),(0,s.jsxs)("p",{children:[ev.values.cus_phone||"-"," ",ev.values.cus_phone1]}),(0,s.jsx)("div",{className:"border-b border-zinc-900 border-opacity-40"})]}),(0,s.jsxs)("div",{className:"space-y-1 overflow-hidden text-ellipsis",children:[(0,s.jsx)("p",{className:"font-bold",children:"Хаяг:"}),(0,s.jsxs)("p",{children:[ev.values.city||"-"," ",ev.values.district," ",ev.values.committee," ",ev.values.town," ",ev.values.street," ",ev.values.toot," "]}),(0,s.jsx)("div",{className:"border-b border-zinc-900 border-opacity-40"})]}),(0,s.jsxs)("div",{className:"space-y-1 overflow-hidden text-ellipsis",children:[(0,s.jsx)("p",{className:"font-bold",children:"Хаяг нэмэлт мэдээлэл:"}),(0,s.jsx)("p",{children:ev.values.addition||"-"}),(0,s.jsx)("div",{className:"border-b border-zinc-900 border-opacity-40"})]})]}):(0,s.jsxs)("div",{className:"text-sm space-y-1",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("p",{className:"font-bold",children:"Барааны нэмэлт тайлбар:"}),(0,s.jsx)("p",{className:"text-xs truncate",children:ev.values.deli_desc||"-"}),(0,s.jsx)("div",{className:"border-b border-zinc-900 border-opacity-40"})]}),(0,s.jsxs)("div",{className:"py-4 space-y-1",children:[(0,s.jsx)("p",{className:"font-bold",children:"Барааны төрөл:"}),(0,s.jsxs)("p",{className:"flex justify-between items-center",children:[(null==P?void 0:P.text)||"-"," ",(0,s.jsx)("img",{src:null==P?void 0:P.img,alt:""})]}),(0,s.jsx)("div",{className:"border-b border-zinc-900 border-opacity-40"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("p",{children:"Барааны нэр:"}),(0,s.jsx)("p",{children:ev.values.item_name||"-"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("p",{children:"Тоо ширхэг:"}),(0,s.jsx)("p",{children:(0,S.uf)(ev.values.quantity||"-")})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("p",{children:"Овор:"}),(0,s.jsx)("p",{children:ev.values.size||"-"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("p",{children:"Жин:"}),(0,s.jsx)("p",{children:ev.values.weight||"-"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("p",{children:"Үйлчилгээний төлбөр:"}),(0,s.jsx)("p",{children:"Дараа төлөх"})]}),(0,s.jsx)("div",{className:"border-b border-zinc-900 border-opacity-40 py-2"}),(0,s.jsxs)("div",{className:"font-bold flex items-center justify-between text-lg",children:[(0,s.jsx)("p",{children:"Нийт үнэ:"}),(0,s.jsxs)("p",{children:["₮ ",(0,S.uf)(ev.values.total_price||0)]})]})]})]}),(0,s.jsx)("div",{className:"bg-white h-1/3 rounded-xl p-5"})]})]})}}}]);